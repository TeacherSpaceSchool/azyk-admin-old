{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport React, { useState, useEffect } from 'react';\nimport App from '../../layouts/App';\nimport { connect } from 'react-redux';\nimport { getSubCategorys } from '../../src/gql/subcategory';\nimport { getEmployment } from '../../src/gql/employment';\nimport { getOrganizations } from '../../src/gql/organization';\nimport { getItem, addItem, setItem, onoffItem, deleteItem, favoriteItem } from '../../src/gql/items';\nimport { addBasket } from '../../src/gql/basket';\nimport { checkInt } from '../../src/lib';\nimport itemStyle from '../../src/styleMUI/item/item';\nimport { useRouter } from 'next/router';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { FacebookShareButton, VKShareButton, OKShareButton, WhatsappShareButton, TelegramShareButton, FacebookIcon, VKIcon, OKIcon, TelegramIcon, WhatsappIcon } from 'react-share';\nimport Button from '@material-ui/core/Button';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Router from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { bindActionCreators } from 'redux';\nimport * as mini_dialogActions from '../../redux/actions/mini_dialog';\nimport * as snackbarActions from '../../redux/actions/snackbar';\nimport Star from '@material-ui/icons/Star';\nimport TextField from '@material-ui/core/TextField';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nvar Confirmation = dynamic(function () {\n  return import('../../components/dialog/Confirmation');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/dialog/Confirmation')];\n    },\n    modules: ['../../components/dialog/Confirmation']\n  }\n});\nvar Item = React.memo(function (props) {\n  var classes = itemStyle();\n  var data = props.data;\n  var router = useRouter();\n  var isMobileApp = props.app.isMobileApp;\n  var _props$user = props.user,\n      profile = _props$user.profile,\n      authenticated = _props$user.authenticated;\n\n  var _useState = useState(data.item !== null ? data.item.stock : ''),\n      stock = _useState[0],\n      setStock = _useState[1];\n\n  var _useState2 = useState(data.item !== null ? data.item.name : ''),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(data.item !== null ? data.item.info : ''),\n      info = _useState3[0],\n      setInfo = _useState3[1];\n\n  var _useState4 = useState(data.item !== null ? data.item.price : ''),\n      price = _useState4[0],\n      setPrice = _useState4[1];\n\n  var _useState5 = useState(data.item !== null ? data.item.subCategory : {}),\n      subCategory = _useState5[0],\n      setSubCategory = _useState5[1];\n\n  var _useState6 = useState(data.item !== null ? data.item.status : ''),\n      status = _useState6[0],\n      setStatus = _useState6[1];\n\n  var handleSubCategory = function handleSubCategory(event) {\n    setSubCategory({\n      _id: event.target.value,\n      name: event.target.name\n    });\n  };\n\n  var _useState7 = useState(data.item !== null ? data.item.organization : {}),\n      organization = _useState7[0],\n      setOrganization = _useState7[1];\n\n  var handleOrganization = function handleOrganization(event) {\n    setOrganization({\n      _id: event.target.value,\n      name: event.target.name\n    });\n  };\n\n  var _useState8 = useState(data.item !== null ? data.item.hit : false),\n      hit = _useState8[0],\n      setHit = _useState8[1];\n\n  var _useState9 = useState(data.item !== null ? data.item.latest : false),\n      latest = _useState9[0],\n      setLatest = _useState9[1];\n\n  var _useState10 = useState(data.item !== null ? data.item.image : ''),\n      preview = _useState10[0],\n      setPreview = _useState10[1];\n\n  var _useState11 = useState(undefined),\n      image = _useState11[0],\n      setImage = _useState11[1];\n\n  var _useState12 = useState({\n    organization: ''\n  }),\n      employment = _useState12[0],\n      setEmployment = _useState12[1];\n\n  var handleChangeImage = function handleChangeImage(event) {\n    setImage(event.target.files[0]);\n    setPreview(URL.createObjectURL(event.target.files[0]));\n  };\n\n  useEffect(function () {\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _employment;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!['организация', 'менеджер', 'экспедитор'].includes(profile.role)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return getEmployment({\n                _id: profile._id\n              });\n\n            case 3:\n              _employment = _context.sent.employment;\n              setOrganization(_employment.organization);\n              setEmployment(_employment);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [profile]);\n  useEffect(function () {\n    if (!authenticated) {\n      if (localStorage.favorites == undefined) localStorage.favorites = _JSON$stringify([]);else if (data.item !== null) {\n        var favorites = JSON.parse(localStorage.favorites);\n\n        for (var i = 0; i < favorites.length; i++) {\n          if (favorites[i]._id == data.item._id) setFavorite(true);\n        }\n      }\n      if (localStorage.basket == undefined) localStorage.basket = _JSON$stringify([]);\n    }\n  }, []); //BUY\n\n  var _useState13 = useState(0),\n      count = _useState13[0],\n      setCount = _useState13[1];\n\n  var increment = function increment() {\n    count += 1;\n    setCount(count);\n  };\n\n  var decrement = function decrement() {\n    if (count > 0) count -= 1;\n    setCount(count);\n  };\n\n  var _props$mini_dialogAct = props.mini_dialogActions,\n      setMiniDialog = _props$mini_dialogAct.setMiniDialog,\n      showMiniDialog = _props$mini_dialogAct.showMiniDialog;\n  var showSnackBar = props.snackbarActions.showSnackBar;\n\n  var _useState14 = useState(data.item !== null && data.item.favorite !== undefined ? data.item.favorite : []),\n      favorite = _useState14[0],\n      setFavorite = _useState14[1];\n\n  return __jsx(App, {\n    filters: data.filterItem,\n    sorts: data.sortItem,\n    pageName: data.item !== null ? router.query.id === 'new' ? 'Добавить' : data.item.name : 'Ничего не найдено'\n  }, __jsx(Head, null, __jsx(\"title\", null, data.item !== null ? router.query.id === 'new' ? 'Добавить' : data.item.name : 'Ничего не найдено')), __jsx(Card, {\n    className: classes.page\n  }, __jsx(CardContent, {\n    className: isMobileApp ? classes.column : classes.row\n  }, profile.role === 'admin' || router.query.id === 'new' || ['менеджер', 'организация'].includes(profile.role) && data.item.organization._id === employment.organization._id ? data.item !== null || router.query.id === 'new' ? __jsx(React.Fragment, null, __jsx(\"label\", {\n    htmlFor: \"contained-button-file\"\n  }, __jsx(LazyLoadImage, {\n    effect: \"blur\",\n    className: isMobileApp ? classes.mediaM : classes.mediaD,\n    src: preview,\n    alt: 'Добавить'\n  })), __jsx(\"div\", null, __jsx(\"h1\", {\n    className: classes.name\n  }, __jsx(TextField, {\n    label: \"\\u0418\\u043C\\u044F\",\n    value: name,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setName(event.target.value);\n    },\n    inputProps: {\n      'aria-label': 'description'\n    }\n  })), __jsx(\"div\", {\n    className: classes.price\n  }, __jsx(TextField, {\n    label: \"\\u0426\\u0435\\u043D\\u0430\",\n    value: price,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setPrice(checkInt(event.target.value));\n    },\n    inputProps: {\n      'aria-label': 'description'\n    }\n  })), __jsx(\"div\", {\n    className: classes.price\n  }, __jsx(TextField, {\n    label: \"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430\",\n    value: stock,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setStock(checkInt(event.target.value));\n    },\n    inputProps: {\n      'aria-label': 'description'\n    }\n  })), profile.role === 'admin' ? __jsx(FormControl, {\n    className: isMobileApp ? classes.inputM : classes.inputD\n  }, __jsx(InputLabel, null, \"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), __jsx(Select, {\n    value: organization._id,\n    onChange: handleOrganization\n  }, data.organizations.map(function (element) {\n    return __jsx(MenuItem, {\n      key: element._id,\n      value: element._id,\n      ola: element.name\n    }, element.name);\n  }))) : __jsx(Input, {\n    value: organization.name,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    inputProps: {\n      'aria-label': 'description',\n      readOnly: true\n    }\n  }), __jsx(\"br\", null), __jsx(FormControl, {\n    className: isMobileApp ? classes.inputM : classes.inputD\n  }, __jsx(InputLabel, null, \"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"), __jsx(Select, {\n    value: subCategory._id,\n    onChange: handleSubCategory\n  }, data.subCategorys.map(function (element) {\n    return __jsx(MenuItem, {\n      key: element._id,\n      value: element._id,\n      ola: element.name\n    }, element.name);\n  }))), __jsx(\"br\", null), profile.role === 'admin' ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.row\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      checked: hit,\n      onChange: function onChange() {\n        setHit(!hit);\n      },\n      color: \"primary\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      }\n    }),\n    label: \"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u043E\\u0435\"\n  }), __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      checked: latest,\n      onChange: function onChange() {\n        setLatest(!latest);\n      },\n      color: \"primary\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      }\n    }),\n    label: \"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0430\"\n  })), __jsx(\"br\", null)) : null, __jsx(TextField, {\n    multiline: true,\n    label: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\",\n    value: info,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setInfo(event.target.value);\n    },\n    inputProps: {\n      'aria-label': 'description'\n    }\n  }), __jsx(\"br\", null), __jsx(\"div\", {\n    className: classes.row\n  }, router.query.id === 'new' ? __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (name.length > 0 && price > 0 && subCategory._id != undefined && organization._id != undefined) {\n                action =\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.next = 2;\n                            return addItem({\n                              name: name,\n                              stock: stock,\n                              image: image,\n                              info: info,\n                              price: price,\n                              subCategory: subCategory._id,\n                              hit: hit,\n                              latest: latest,\n                              organization: organization._id\n                            }, subCategory._id);\n\n                          case 2:\n                            Router.push(\"/items/\".concat(subCategory._id));\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function action() {\n                    return _ref3.apply(this, arguments);\n                  };\n                }();\n\n                setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                  action: action\n                }));\n                showMiniDialog(true);\n              } else {\n                showSnackBar('Заполните все поля');\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    })),\n    size: \"small\",\n    color: \"primary\"\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\") : __jsx(React.Fragment, null, __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var editElement, action;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              editElement = {\n                _id: data.item._id\n              };\n              if (stock > 0 && stock !== data.item.stock) editElement.stock = stock;\n              if (name.length > 0 && name !== data.item.name) editElement.name = name;\n              if (image !== undefined) editElement.image = image;\n              if (info.length > 0 && info !== data.item.info) editElement.info = info;\n              if (price > 0 && price !== data.item.price) editElement.price = price;\n              if (hit !== data.item.hit) editElement.hit = hit;\n              if (latest !== data.item.latest) editElement.latest = latest;\n              if (organization._id !== data.item.organization._id) editElement.organization = organization._id;\n              if (subCategory._id !== data.item.subCategory._id) editElement.subCategory = subCategory._id;\n\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref5 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee4() {\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return setItem(editElement, subCategory._id);\n\n                        case 2:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function action() {\n                  return _ref5.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action\n              }));\n              showMiniDialog(true);\n\n            case 13:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    })),\n    size: \"small\",\n    color: \"primary\"\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref7 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee6() {\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          _context6.next = 2;\n                          return onoffItem([data.item._id]);\n\n                        case 2:\n                          setStatus(status === 'active' ? 'deactive' : 'active');\n\n                        case 3:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                }));\n\n                return function action() {\n                  return _ref7.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action\n              }));\n              showMiniDialog(true);\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    })),\n    size: \"small\",\n    color: \"primary\"\n  }, status === 'active' ? 'Отключить' : 'Включить'), profile.role === 'admin' ? __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref9 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee8() {\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          _context8.next = 2;\n                          return deleteItem([data.item._id], subCategory._id);\n\n                        case 2:\n                          Router.push(\"/items/\".concat(subCategory._id));\n\n                        case 3:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                }));\n\n                return function action() {\n                  return _ref9.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action\n              }));\n              showMiniDialog(true);\n\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    })),\n    size: \"small\",\n    color: \"primary\"\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\") : null)))) : 'Ничего не найдено' : data.item === null || router.query.id === 'new' ? 'Ничего не найдено' : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.divImage\n  }, __jsx(LazyLoadImage, {\n    effect: \"blur\",\n    className: isMobileApp ? classes.mediaM : classes.mediaD,\n    src: data.item.image,\n    alt: data.item.info\n  }), __jsx(Star, {\n    className: classes.buttonToggle,\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee11() {\n      var index, favorites, i, action;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              if (!(profile.role === 'client')) {\n                _context11.next = 7;\n                break;\n              }\n\n              _context11.next = 3;\n              return favoriteItem([data.item._id]);\n\n            case 3:\n              index = favorite.indexOf(profile._id);\n\n              if (index === -1) {\n                favorite.push(profile._id);\n                setFavorite(_toConsumableArray(favorite));\n              }\n\n              _context11.next = 8;\n              break;\n\n            case 7:\n              if (!authenticated) {\n                favorites = JSON.parse(localStorage.favorites);\n                index = -1;\n\n                for (i = 0; i < favorites.length; i++) {\n                  if (favorites[i]._id == data.item._id) index = i;\n                }\n\n                if (index === -1) {\n                  favorites.push(data.item);\n                  setFavorite(true);\n                  localStorage.favorites = _JSON$stringify(favorites);\n                }\n              }\n\n            case 8:\n              if (index !== -1) {\n                action =\n                /*#__PURE__*/\n                function () {\n                  var _ref11 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee10() {\n                    var _favorites;\n\n                    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n                      while (1) {\n                        switch (_context10.prev = _context10.next) {\n                          case 0:\n                            if (profile.role === 'client') {\n                              favorite.splice(index, 1);\n                              setFavorite(_toConsumableArray(favorite));\n                            } else if (!authenticated) {\n                              _favorites = JSON.parse(localStorage.favorites);\n\n                              _favorites.splice(index, 1);\n\n                              setFavorite(false);\n                              localStorage.favorites = _JSON$stringify(_favorites);\n                            }\n\n                          case 1:\n                          case \"end\":\n                            return _context10.stop();\n                        }\n                      }\n                    }, _callee10);\n                  }));\n\n                  return function action() {\n                    return _ref11.apply(this, arguments);\n                  };\n                }();\n\n                setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                  action: action\n                }));\n                showMiniDialog(true);\n              }\n\n            case 9:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    })),\n    style: {\n      color: !authenticated && favorite === true || profile.role == 'client' && favorite.includes(profile._id) ? '#ffb300' : '#e1e1e1'\n    }\n  })), __jsx(\"div\", null, __jsx(\"br\", null), __jsx(\"h1\", {\n    className: classes.name\n  }, data.item.name), __jsx(\"div\", {\n    className: classes.share\n  }, data.item.organization.name), __jsx(\"div\", {\n    className: classes.row\n  }, data.item.stock === 0 || data.item.stock === undefined ? __jsx(\"div\", {\n    className: classes.price\n  }, data.item.price, \"\\xA0\\u0441\\u043E\\u043C\") : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.stockPrice\n  }, data.item.stock, \"\\xA0\\u0441\\u043E\\u043C\"), __jsx(\"div\", {\n    className: classes.crossedPrice\n  }, data.item.price, \"\\xA0\\u0441\\u043E\\u043C\"))), __jsx(\"br\", null), profile.role === 'client' || !authenticated ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: isMobileApp ? classes.column : classes.rowCenter\n  }, __jsx(\"div\", {\n    className: classes.counter,\n    style: isMobileApp ? {\n      marginBottom: 20\n    } : {\n      marginRight: 20\n    }\n  }, __jsx(\"div\", {\n    className: classes.counterbtn,\n    onClick: decrement\n  }, \"\\u2013\"), __jsx(\"input\", {\n    type: \"text\",\n    className: classes.counternmbr,\n    value: count,\n    onChange: function onChange(event) {\n      setCount(isNaN(event.target.value) || event.target.value.length === 0 ? 0 : _parseInt(event.target.value));\n    }\n  }), __jsx(\"div\", {\n    className: classes.counterbtn,\n    onClick: increment\n  }, \"+\")), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    onClick: function onClick() {\n      if (profile.role === 'client') addBasket({\n        item: data.item._id,\n        count: count > 0 ? count : 1\n      });else if (!authenticated) {\n        var basket = JSON.parse(localStorage.basket);\n        var index = -1;\n\n        for (var i = 0; i < basket.length; i++) {\n          if (basket[i].item._id == data.item._id) index = i;\n        }\n\n        if (index === -1) basket.push({\n          item: data.item,\n          count: count\n        });\n        localStorage.basket = _JSON$stringify(basket);\n      }\n      showSnackBar('Товар добавлен в корзину');\n    }\n  }, \"\\u0412 \\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0423\")), __jsx(\"br\", null), __jsx(\"br\", null), __jsx(\"div\", {\n    className: classes.share\n  }, \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F:\"), __jsx(\"div\", {\n    className: classes.rowCenter\n  }, __jsx(FacebookShareButton, {\n    url: process.browser ? window.location.href.toString() : ''\n  }, __jsx(FacebookIcon, {\n    size: 32,\n    round: true\n  })), \"\\xA0 \\xA0\", __jsx(VKShareButton, {\n    url: process.browser ? window.location.href : ''\n  }, __jsx(VKIcon, {\n    size: 32,\n    round: true\n  })), \"\\xA0 \\xA0\", __jsx(OKShareButton, {\n    url: process.browser ? window.location.href : ''\n  }, __jsx(OKIcon, {\n    size: 32,\n    round: true\n  })), \"\\xA0 \\xA0\", __jsx(WhatsappShareButton, {\n    url: process.browser ? window.location.href : ''\n  }, __jsx(WhatsappIcon, {\n    size: 32,\n    round: true\n  })), \"\\xA0 \\xA0\", __jsx(TelegramShareButton, {\n    url: process.browser ? window.location.href : ''\n  }, __jsx(TelegramIcon, {\n    size: 32,\n    round: true\n  })))) : null)))), __jsx(\"input\", {\n    accept: \"image/*\",\n    style: {\n      display: 'none'\n    },\n    id: \"contained-button-file\",\n    type: \"file\",\n    onChange: handleChangeImage\n  }));\n});\n\nItem.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref12 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee12(ctx) {\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.t0 = _objectSpread;\n            _context12.t1 = {};\n\n            if (!(ctx.query.id !== 'new')) {\n              _context12.next = 8;\n              break;\n            }\n\n            _context12.next = 5;\n            return getItem({\n              _id: ctx.query.id\n            });\n\n          case 5:\n            _context12.t2 = _context12.sent;\n            _context12.next = 9;\n            break;\n\n          case 8:\n            _context12.t2 = {\n              item: {\n                image: '/static/add.png',\n                stock: 0,\n                name: '',\n                info: '',\n                price: 0,\n                subCategory: {\n                  _id: ''\n                },\n                organization: {\n                  _id: ''\n                },\n                hit: false,\n                latest: false\n              }\n            };\n\n          case 9:\n            _context12.t3 = _context12.t2;\n            _context12.next = 12;\n            return getOrganizations({\n              search: '',\n              sort: 'name',\n              filter: ''\n            });\n\n          case 12:\n            _context12.t4 = _context12.sent;\n            _context12.next = 15;\n            return getSubCategorys({\n              category: 'all',\n              search: '',\n              sort: 'name',\n              filter: ''\n            });\n\n          case 15:\n            _context12.t5 = _context12.sent;\n            _context12.t6 = (0, _context12.t0)(_context12.t1, _context12.t3, _context12.t4, _context12.t5);\n            return _context12.abrupt(\"return\", {\n              data: _context12.t6\n            });\n\n          case 18:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n\n  return function (_x) {\n    return _ref12.apply(this, arguments);\n  };\n}();\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\n    snackbarActions: bindActionCreators(snackbarActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Item);","map":null,"metadata":{},"sourceType":"module"}