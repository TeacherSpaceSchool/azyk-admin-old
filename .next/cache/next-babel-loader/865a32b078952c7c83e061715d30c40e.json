{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"C:\\\\projects\\\\azyk\\\\azyk-admin\\\\components\\\\dialog\\\\Order.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { cancelOrders, approveOrders, setOrder } from '../../src/gql/order';\nimport * as mini_dialogActions from '../../redux/actions/mini_dialog';\nimport * as snackbarActions from '../../redux/actions/snackbar';\nimport * as userActions from '../../redux/actions/user';\nimport Button from '@material-ui/core/Button';\nimport dialogContentStyle from '../../src/styleMUI/dialogContent';\nimport { pdDDMMYYHHMM } from '../../src/lib';\nimport Confirmation from './Confirmation';\nimport Geo from '../../components/dialog/Geo';\nimport IconButton from '@material-ui/core/IconButton';\nimport CancelIcon from '@material-ui/icons/Cancel';\nvar Order = React.memo(function (props) {\n  var isMobileApp = props.app.isMobileApp;\n  var profile = props.user.profile;\n  var _props$mini_dialogAct = props.mini_dialogActions,\n      showMiniDialog = _props$mini_dialogAct.showMiniDialog,\n      setMiniDialog = _props$mini_dialogAct.setMiniDialog;\n  var classes = props.classes,\n      element = props.element,\n      setList = props.setList,\n      route = props.route,\n      getInvoices = props.getInvoices;\n\n  var _useState = useState(element.orders),\n      orders = _useState[0],\n      setOrders = _useState[1];\n\n  var _useState2 = useState(element.allPrice),\n      allPrice = _useState2[0],\n      setAllPrice = _useState2[1];\n\n  var width = isMobileApp ? window.innerWidth - 144 : 500;\n  var showSnackBar = props.snackbarActions.showSnackBar;\n\n  var canculateAllPrice = function canculateAllPrice() {\n    allPrice = 0;\n\n    for (var i = 0; i < orders.length; i++) {\n      allPrice += orders[i].allPrice;\n    }\n\n    setAllPrice(allPrice);\n  };\n\n  var increment = function increment(idx) {\n    orders[idx].count += 1;\n    orders[idx].allPrice = orders[idx].count * (orders[idx].item.stock === 0 || orders[idx].item.stock === undefined ? orders[idx].item.price : orders[idx].item.stock);\n    setOrders(_toConsumableArray(orders));\n    canculateAllPrice();\n  };\n\n  var decrement = function decrement(idx) {\n    if (orders[idx].count > 1) {\n      orders[idx].count -= 1;\n      orders[idx].allPrice = orders[idx].count * (orders[idx].item.stock === 0 || orders[idx].item.stock === undefined ? orders[idx].item.price : orders[idx].item.stock);\n      setOrders(_toConsumableArray(orders));\n      canculateAllPrice();\n    }\n  };\n\n  var remove = function remove(idx) {\n    if (orders.length > 1) {\n      orders.splice(idx, 1);\n      setOrders(_toConsumableArray(orders));\n      canculateAllPrice();\n    } else showSnackBar('Товары не могут отсутствовать в заказе');\n  };\n\n  return __jsx(\"div\", {\n    className: classes.column,\n    style: {\n      width: width\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u2116:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, element.number)), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, element.orders[0].status === 'принят' && (element.confirmationForwarder || element.confirmationClient) ? element.confirmationClient ? 'подтвержден клиентом' : element.confirmationForwarder ? 'доставлен поставщиком' : element.orders[0].status : element.orders[0].status)), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"\\u0410\\u0434\\u0440\\u0435\\u0441: \\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, element.address[0])), __jsx(\"div\", {\n    className: classes.geo,\n    style: {\n      color: element.address[1] ? '#ffb300' : 'red'\n    },\n    onClick: function onClick() {\n      setMiniDialog('Геолокация', __jsx(Geo, {\n        geo: element.address[1],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), true);\n      showMiniDialog(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, element.address[1] ? 'Посмотреть геолокацию' : 'Геолокация не задана'), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"\\u0412\\u0440\\u0435\\u043C\\u044F \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430: \\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, pdDDMMYYHHMM(new Date(element.createdAt)))), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"\\u0412\\u0440\\u0435\\u043C\\u044F \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, pdDDMMYYHHMM(new Date(element.dateDelivery)))), __jsx(\"a\", {\n    href: \"/client/\".concat(element.client.user._id),\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044C:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, element.client.name))), __jsx(\"a\", {\n    href: \"/organization/\".concat(element.orders[0].item.organization._id),\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u0449\\u0438\\u043A:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, element.orders[0].item.organization.name))), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"\\u0421\\u0443\\u043C\\u043C\\u0430:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, allPrice, \"\\xA0\\u0441\\u043E\\u043C\")), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, element.paymentMethod)), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.nameField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F:\\xA0\"), __jsx(\"div\", {\n    className: classes.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, element.info)), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.column,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B:\"), orders.map(function (order, idx) {\n    if (element.orders[0].status === 'обработка' && (profile.role === 'client' || ['менеджер', 'организация'].includes(profile.role) || profile.role === 'admin')) return __jsx(\"div\", {\n      key: idx,\n      className: classes.column,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u0422\\u043E\\u0432\\u0430\\u0440:\\xA0\"), __jsx(\"a\", {\n      href: \"/item/\".concat(order.item._id),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, order.item.name)), __jsx(IconButton, {\n      onClick: function onClick() {\n        remove(idx);\n      },\n      color: \"primary\",\n      className: classes.button,\n      \"aria-label\": \"\\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, __jsx(CancelIcon, {\n      style: {\n        height: 20,\n        width: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }))), __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E:\\xA0\"), __jsx(\"div\", {\n      className: classes.counterbtn,\n      onClick: function onClick() {\n        decrement(idx);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"-\"), __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, order.count, \"\\xA0\\u0448\\u0442\"), __jsx(\"div\", {\n      className: classes.counterbtn,\n      onClick: function onClick() {\n        increment(idx);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"+\")), __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C:\\xA0\"), __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, order.allPrice, \"\\xA0\\u0441\\u043E\\u043C\")), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }));else return __jsx(\"div\", {\n      key: idx,\n      className: classes.column,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      href: \"/item/\".concat(order.item._id),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"\\u0422\\u043E\\u0432\\u0430\\u0440:\\xA0\"), __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, order.item.name))), __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E:\\xA0\"), __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, order.count, \"\\xA0\\u0448\\u0442\")), __jsx(\"div\", {\n      className: classes.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: classes.nameField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C:\\xA0\"), __jsx(\"div\", {\n      className: classes.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, order.allPrice, \"\\xA0\\u0441\\u043E\\u043C\")), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }));\n  })), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, element.orders[0].status === 'обработка' && (profile.role === 'client' || ['менеджер', 'организация'].includes(profile.role) || profile.role === 'admin') ? __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      var action =\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var sendOrders, invoices;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  sendOrders = orders.map(function (order) {\n                    return {\n                      _id: order._id,\n                      count: order.count,\n                      allPrice: order.allPrice\n                    };\n                  });\n                  _context.next = 3;\n                  return setOrder({\n                    orders: sendOrders,\n                    invoice: element._id\n                  });\n\n                case 3:\n                  invoices = _context.sent.invoices;\n                  if (setList) setList(invoices);\n                  if (getInvoices) getInvoices();\n                  showMiniDialog(false);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function action() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n        action: action,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }));\n    },\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\") : null, profile.role === 'client' && 'принят' === element.orders[0].status && !element.confirmationClient || ['менеджер', 'организация'].includes(profile.role) && 'принят' === element.orders[0].status && !element.confirmationForwarder || profile.role === 'admin' ? __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      var action =\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          var invoices;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return approveOrders({\n                    route: route,\n                    invoices: [element._id]\n                  });\n\n                case 2:\n                  invoices = _context2.sent.invoices;\n                  if (setList) setList(invoices);\n                  if (getInvoices) getInvoices();\n\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function action() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n        action: action,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }));\n    },\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u0432\\u044B\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\") : null, profile.role === 'client' && element.orders[0].status === 'обработка' || ['менеджер', 'организация'].includes(profile.role) && ['обработка', 'принят'].includes(element.orders[0].status) && !element.confirmationForwarder || profile.role === 'admin' ? __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      var _id = element.orders.map(function (order) {\n        return order._id;\n      });\n\n      var action =\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3() {\n          var invoices;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return cancelOrders({\n                    _id: _id\n                  });\n\n                case 2:\n                  invoices = _context3.sent.invoices;\n                  if (setList) setList(invoices);\n                  if (getInvoices) getInvoices();\n\n                case 5:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function action() {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n\n      setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n        action: action,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }));\n    },\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\") : null, __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: function onClick() {\n      showMiniDialog(false);\n    },\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\")));\n});\n\nfunction mapStateToProps(state) {\n  return {\n    mini_dialog: state.mini_dialog,\n    user: state.user,\n    app: state.app\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\n    userActions: bindActionCreators(userActions, dispatch),\n    snackbarActions: bindActionCreators(snackbarActions, dispatch)\n  };\n}\n\nOrder.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(dialogContentStyle)(Order));","map":{"version":3,"sources":["C:\\projects\\azyk\\azyk-admin\\components\\dialog\\Order.js"],"names":["React","useState","PropTypes","withStyles","connect","bindActionCreators","cancelOrders","approveOrders","setOrder","mini_dialogActions","snackbarActions","userActions","Button","dialogContentStyle","pdDDMMYYHHMM","Confirmation","Geo","IconButton","CancelIcon","Order","memo","props","isMobileApp","app","profile","user","showMiniDialog","setMiniDialog","classes","element","setList","route","getInvoices","orders","setOrders","allPrice","setAllPrice","width","window","innerWidth","showSnackBar","canculateAllPrice","i","length","increment","idx","count","item","stock","undefined","price","decrement","remove","splice","column","row","nameField","value","number","status","confirmationForwarder","confirmationClient","address","geo","color","Date","createdAt","dateDelivery","client","_id","name","organization","paymentMethod","info","map","order","role","includes","button","height","counterbtn","action","sendOrders","invoice","invoices","mapStateToProps","state","mini_dialog","mapDispatchToProps","dispatch","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { cancelOrders, approveOrders, setOrder } from '../../src/gql/order'\r\nimport * as mini_dialogActions from '../../redux/actions/mini_dialog'\r\nimport * as snackbarActions from '../../redux/actions/snackbar'\r\nimport * as userActions from '../../redux/actions/user'\r\nimport Button from '@material-ui/core/Button';\r\nimport dialogContentStyle from '../../src/styleMUI/dialogContent'\r\nimport { pdDDMMYYHHMM } from '../../src/lib'\r\nimport Confirmation from './Confirmation'\r\nimport Geo from '../../components/dialog/Geo'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nconst Order =  React.memo(\r\n    (props) =>{\r\n        const { isMobileApp } = props.app;\r\n        const { profile } = props.user;\r\n        const { showMiniDialog, setMiniDialog } = props.mini_dialogActions;\r\n        const { classes, element, setList, route, getInvoices } = props;\r\n        let [orders, setOrders] = useState(element.orders);\r\n        let [allPrice, setAllPrice] = useState(element.allPrice);\r\n        const width = isMobileApp? (window.innerWidth-144) : 500;\r\n        const { showSnackBar } = props.snackbarActions;\r\n        let canculateAllPrice = ()=>{\r\n            allPrice=0\r\n            for(let i=0; i<orders.length; i++){\r\n                allPrice+=orders[i].allPrice\r\n            }\r\n            setAllPrice(allPrice)\r\n        }\r\n        let increment = (idx)=>{\r\n            orders[idx].count+=1\r\n            orders[idx].allPrice = orders[idx].count * (orders[idx].item.stock===0||orders[idx].item.stock===undefined?orders[idx].item.price:orders[idx].item.stock)\r\n            setOrders([...orders])\r\n            canculateAllPrice()\r\n        }\r\n        let decrement = (idx)=>{\r\n            if(orders[idx].count>1) {\r\n                orders[idx].count -= 1\r\n                orders[idx].allPrice = orders[idx].count * (orders[idx].item.stock===0||orders[idx].item.stock===undefined?orders[idx].item.price:orders[idx].item.stock)\r\n                setOrders([...orders])\r\n                canculateAllPrice()\r\n            }\r\n        }\r\n        let remove = (idx)=>{\r\n            if(orders.length>1) {\r\n                orders.splice(idx, 1)\r\n                setOrders([...orders])\r\n                canculateAllPrice()\r\n            } else\r\n                showSnackBar('Товары не могут отсутствовать в заказе')\r\n        }\r\n        return (\r\n            <div className={classes.column} style={{width: width}}>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Заказ №:&nbsp;</div>\r\n                    <div className={classes.value}>{element.number}</div>\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Статус:&nbsp;</div>\r\n                    <div className={classes.value}>{\r\n                            element.orders[0].status==='принят'&&(element.confirmationForwarder||element.confirmationClient)?\r\n                                element.confirmationClient?\r\n                                    'подтвержден клиентом'\r\n                                    :\r\n                                    element.confirmationForwarder?\r\n                                        'доставлен поставщиком'\r\n                                        :\r\n                                        element.orders[0].status\r\n                                :\r\n                                element.orders[0].status\r\n                    }</div>\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Адрес: &nbsp;</div>\r\n                    <div className={classes.value}>{element.address[0]}</div>\r\n                </div>\r\n                <div className={classes.geo} style={{color: element.address[1]?'#ffb300':'red'}} onClick={()=>{\r\n                    setMiniDialog('Геолокация', <Geo geo={element.address[1]}/>, true)\r\n                    showMiniDialog(true)\r\n                }}>\r\n                    {\r\n                        element.address[1]?\r\n                            'Посмотреть геолокацию'\r\n                            :\r\n                            'Геолокация не задана'\r\n                    }\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Время заказа: &nbsp;</div>\r\n                    <div className={classes.value}>{pdDDMMYYHHMM(new Date(element.createdAt))}</div>\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Время доставки:&nbsp;</div>\r\n                    <div className={classes.value}>{pdDDMMYYHHMM(new Date(element.dateDelivery))}</div>\r\n                </div>\r\n                <a href={`/client/${element.client.user._id}`} target='_blank'>\r\n                    <div className={classes.row}>\r\n                        <div className={classes.nameField}>Получатель:&nbsp;</div>\r\n                        <div className={classes.value}>{element.client.name}</div>\r\n                    </div>\r\n                </a>\r\n                <a href={`/organization/${element.orders[0].item.organization._id}`} target='_blank'>\r\n                    <div className={classes.row}>\r\n                        <div className={classes.nameField}>Поставщик:&nbsp;</div>\r\n                        <div className={classes.value}>{element.orders[0].item.organization.name}</div>\r\n                    </div>\r\n                </a>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Сумма:&nbsp;</div>\r\n                    <div className={classes.value}>{allPrice}&nbsp;сом</div>\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Способ оплаты:&nbsp;</div>\r\n                    <div className={classes.value}>{element.paymentMethod}</div>\r\n                </div>\r\n                <div className={classes.row}>\r\n                    <div className={classes.nameField}>Информация:&nbsp;</div>\r\n                    <div className={classes.value}>{element.info}</div>\r\n                </div>\r\n                <br/>\r\n                <div className={classes.column}>\r\n                    <b>Товары:</b>\r\n                    {\r\n                        orders.map((order, idx) => {\r\n                            if(\r\n                                element.orders[0].status==='обработка'&&\r\n                                (\r\n                                    profile.role==='client'||\r\n                                    ['менеджер', 'организация'].includes(profile.role)||\r\n                                    profile.role==='admin'\r\n                                )\r\n                            )\r\n                                return(\r\n                                    <div key={idx} className={classes.column}>\r\n                                        <div className={classes.row}>\r\n                                            <div className={classes.nameField}>Товар:&nbsp;</div>\r\n                                            <a href={`/item/${order.item._id}`} target='_blank'>\r\n                                                <div className={classes.value}>{order.item.name}</div>\r\n                                            </a>\r\n                                            <IconButton onClick={()=>{\r\n                                                remove(idx)\r\n                                            }} color='primary' className={classes.button} aria-label='удалить'>\r\n                                                <CancelIcon style={{height: 20, width: 20}}/>\r\n                                            </IconButton>\r\n                                        </div>\r\n                                        <div className={classes.row}>\r\n                                            <div className={classes.nameField}>Количество:&nbsp;</div>\r\n                                            <div className={classes.counterbtn} onClick={()=>{decrement(idx)}}>-</div>\r\n                                            <div className={classes.value}>{order.count}&nbsp;шт</div>\r\n                                            <div className={classes.counterbtn} onClick={()=>{increment(idx)}}>+</div>\r\n                                        </div>\r\n                                        <div className={classes.row}>\r\n                                            <div className={classes.nameField}>Общая стоимость:&nbsp;</div>\r\n                                            <div className={classes.value}>{order.allPrice}&nbsp;сом</div>\r\n                                        </div>\r\n                                        <br/>\r\n                                    </div>\r\n                                )\r\n                            else\r\n                                return(\r\n                                    <div key={idx} className={classes.column}>\r\n                                        <a href={`/item/${order.item._id}`} target='_blank'>\r\n                                            <div className={classes.row}>\r\n                                                <div className={classes.nameField}>Товар:&nbsp;</div>\r\n                                                <div className={classes.value}>{order.item.name}</div>\r\n                                            </div>\r\n                                        </a>\r\n                                        <div className={classes.row}>\r\n                                            <div className={classes.nameField}>Количество:&nbsp;</div>\r\n                                            <div className={classes.value}>{order.count}&nbsp;шт</div>\r\n                                        </div>\r\n                                        <div className={classes.row}>\r\n                                            <div className={classes.nameField}>Общая стоимость:&nbsp;</div>\r\n                                            <div className={classes.value}>{order.allPrice}&nbsp;сом</div>\r\n                                        </div>\r\n                                        <br/>\r\n                                    </div>\r\n                                )\r\n                        })\r\n                    }\r\n                </div>\r\n                <div>\r\n                    {\r\n                        (element.orders[0].status==='обработка'&&(profile.role==='client'||['менеджер', 'организация'].includes(profile.role)||profile.role==='admin'))?\r\n                            <Button variant='contained' color='primary' onClick={()=>{\r\n                                const action = async() => {\r\n                                    let sendOrders = orders.map((order)=>{return {_id: order._id, count: order.count, allPrice: order.allPrice}})\r\n                                    let invoices = (await setOrder({orders: sendOrders, invoice: element._id})).invoices\r\n                                    if(setList)\r\n                                        setList(invoices)\r\n                                    if(getInvoices)\r\n                                        getInvoices()\r\n                                    showMiniDialog(false);\r\n                                }\r\n                                setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                            }} className={classes.button}>\r\n                                Сохранить\r\n                            </Button>\r\n                            :\r\n                            null\r\n                    }\r\n                    {\r\n                        (\r\n                            (profile.role==='client'&&'принят'===element.orders[0].status&&!element.confirmationClient)\r\n                            ||\r\n                            (['менеджер', 'организация'].includes(profile.role)&&'принят'===element.orders[0].status&&!element.confirmationForwarder)\r\n                            ||\r\n                            profile.role==='admin'\r\n                        )?\r\n                            <Button variant='contained' color='primary' onClick={()=>{\r\n                                const action = async() => {\r\n                                    let invoices = (await approveOrders({route: route, invoices: [element._id]})).invoices\r\n                                    if(setList)\r\n                                        setList(invoices)\r\n                                    if(getInvoices)\r\n                                        getInvoices()\r\n                                }\r\n                                setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                            }} className={classes.button}>\r\n                                Заказ выполнен\r\n                            </Button>\r\n                            :\r\n                            null\r\n                    }\r\n                    {\r\n                        (profile.role==='client'&&element.orders[0].status==='обработка')\r\n                        ||(['менеджер', 'организация'].includes(profile.role)&&['обработка', 'принят'].includes(element.orders[0].status)&&!element.confirmationForwarder\r\n                        ||profile.role==='admin')?\r\n                            <Button variant='contained' color='primary' onClick={()=>{\r\n                                let _id = element.orders.map(order=>order._id)\r\n                                const action = async() => {\r\n                                    let invoices = (await cancelOrders({_id: _id})).invoices\r\n                                    if(setList)\r\n                                        setList(invoices)\r\n                                    if(getInvoices)\r\n                                        getInvoices()\r\n                                }\r\n                                setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                            }} className={classes.button}>\r\n                                Отменить заказ\r\n                            </Button>\r\n                            :\r\n                            null\r\n                    }\r\n                    <Button variant='contained' color='secondary' onClick={()=>{showMiniDialog(false);}} className={classes.button}>\r\n                        Закрыть\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n)\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        mini_dialog: state.mini_dialog,\r\n        user: state.user,\r\n        app: state.app\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n        snackbarActions: bindActionCreators(snackbarActions, dispatch),\r\n    }\r\n}\r\n\r\nOrder.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(dialogContentStyle)(Order));"]},"metadata":{},"sourceType":"module"}