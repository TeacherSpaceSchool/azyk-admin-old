{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\projects\\\\azyk\\\\azyk-admin\\\\pages\\\\item\\\\[id].js\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport React, { useState, useEffect } from 'react';\nimport App from '../../layouts/App';\nimport { connect } from 'react-redux';\nimport { getSubCategorys } from '../../src/gql/subcategory';\nimport { getEmployment } from '../../src/gql/employment';\nimport { getOrganizations } from '../../src/gql/organization';\nimport { getItem, addItem, setItem, onoffItem, deleteItem, favoriteItem } from '../../src/gql/items';\nimport { addBasket } from '../../src/gql/basket';\nimport { checkInt } from '../../src/lib';\nimport itemStyle from '../../src/styleMUI/item/item';\nimport { useRouter } from 'next/router';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { FacebookShareButton, VKShareButton, OKShareButton, WhatsappShareButton, TelegramShareButton, FacebookIcon, VKIcon, OKIcon, TelegramIcon, WhatsappIcon } from 'react-share';\nimport Button from '@material-ui/core/Button';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Router from 'next/router';\nimport { bindActionCreators } from 'redux';\nimport * as mini_dialogActions from '../../redux/actions/mini_dialog';\nimport * as snackbarActions from '../../redux/actions/snackbar';\nimport Star from '@material-ui/icons/Star';\nimport TextField from '@material-ui/core/TextField';\nimport Confirmation from '../../components/dialog/Confirmation';\nimport { urlMain } from '../../redux/constants/other';\nimport DeliveryDays from '../../components/dialog/DeliveryDays';\nimport { getCountBasket } from '../../src/gql/basket';\nvar Item = React.memo(function (props) {\n  var classes = itemStyle();\n  var data = props.data;\n  var router = useRouter();\n  var isMobileApp = props.app.isMobileApp;\n  var _props$user = props.user,\n      profile = _props$user.profile,\n      authenticated = _props$user.authenticated;\n\n  var _useState = useState(data.item !== null ? data.item.stock : ''),\n      stock = _useState[0],\n      setStock = _useState[1];\n\n  var _useState2 = useState(data.item !== null ? data.item.name : ''),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(data.item !== null ? data.item.info : ''),\n      info = _useState3[0],\n      setInfo = _useState3[1];\n\n  var _useState4 = useState(data.item !== null ? data.item.price : ''),\n      price = _useState4[0],\n      setPrice = _useState4[1];\n\n  var _useState5 = useState(data.item !== null ? data.item.deliveryDays : []),\n      deliveryDays = _useState5[0],\n      setDeliveryDays = _useState5[1];\n\n  var _useState6 = useState(data.item !== null ? data.item.subCategory : {}),\n      subCategory = _useState6[0],\n      setSubCategory = _useState6[1];\n\n  var _useState7 = useState(data.item !== null ? data.item.status : ''),\n      status = _useState7[0],\n      setStatus = _useState7[1];\n\n  var handleSubCategory = function handleSubCategory(event) {\n    setSubCategory({\n      _id: event.target.value,\n      name: event.target.name\n    });\n  };\n\n  var _useState8 = useState(data.item !== null ? data.item.organization : {}),\n      organization = _useState8[0],\n      setOrganization = _useState8[1];\n\n  var handleOrganization = function handleOrganization(event) {\n    setOrganization({\n      _id: event.target.value,\n      name: event.target.name\n    });\n  };\n\n  var _useState9 = useState(data.item !== null ? data.item.hit : false),\n      hit = _useState9[0],\n      setHit = _useState9[1];\n\n  var _useState10 = useState(data.item !== null ? data.item.latest : false),\n      latest = _useState10[0],\n      setLatest = _useState10[1];\n\n  var _useState11 = useState(data.item !== null ? data.item.image : ''),\n      preview = _useState11[0],\n      setPreview = _useState11[1];\n\n  var _useState12 = useState(undefined),\n      image = _useState12[0],\n      setImage = _useState12[1];\n\n  var _useState13 = useState({\n    organization: ''\n  }),\n      employment = _useState13[0],\n      setEmployment = _useState13[1];\n\n  var handleChangeImage = function handleChangeImage(event) {\n    setImage(event.target.files[0]);\n    setPreview(URL.createObjectURL(event.target.files[0]));\n  };\n\n  useEffect(function () {\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _employment;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!['организация', 'менеджер', 'экспедитор'].includes(profile.role)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return getEmployment({\n                _id: profile._id\n              });\n\n            case 3:\n              _employment = _context.sent.employment;\n              setOrganization(_employment.organization);\n              setEmployment(_employment);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [profile]);\n  useEffect(function () {\n    if (!authenticated) {\n      if (localStorage.favorites == undefined) localStorage.favorites = _JSON$stringify([]);else if (data.item !== null) {\n        var favorites = JSON.parse(localStorage.favorites);\n\n        for (var i = 0; i < favorites.length; i++) {\n          if (favorites[i]._id == data.item._id) setFavorite(true);\n        }\n      }\n      if (localStorage.basket == undefined) localStorage.basket = _JSON$stringify([]);\n    }\n  }, []); //BUY\n\n  var _useState14 = useState(0),\n      count = _useState14[0],\n      setCount = _useState14[1];\n\n  var increment = function increment() {\n    count += 1;\n    setCount(count);\n  };\n\n  var decrement = function decrement() {\n    if (count > 0) count -= 1;\n    setCount(count);\n  };\n\n  var _props$mini_dialogAct = props.mini_dialogActions,\n      setMiniDialog = _props$mini_dialogAct.setMiniDialog,\n      showMiniDialog = _props$mini_dialogAct.showMiniDialog;\n  var showSnackBar = props.snackbarActions.showSnackBar;\n\n  var _useState15 = useState(data.item !== null && data.item.favorite !== undefined ? data.item.favorite : []),\n      favorite = _useState15[0],\n      setFavorite = _useState15[1];\n\n  return __jsx(App, {\n    subcategory: data.item.subCategory ? data.item.subCategory : undefined,\n    category: data.item.subCategory ? data.item.subCategory.category : undefined,\n    filters: data.filterItem,\n    sorts: data.sortItem,\n    pageName: data.item !== null ? router.query.id === 'new' ? 'Добавить' : data.item.name : 'Ничего не найдено',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, __jsx(\"title\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, data.item !== null ? router.query.id === 'new' ? 'Добавить' : data.item.name : 'Ничего не найдено'), __jsx(\"meta\", {\n    name: \"description\",\n    content: data.item !== null ? data.item.info : 'Ничего не найдено',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: data.item !== null ? router.query.id === 'new' ? 'Добавить' : data.item.name : 'Ничего не найдено',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: data.item !== null ? data.item.info : 'Ничего не найдено',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"website\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image\",\n    content: preview,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: \"\".concat(urlMain, \"/item/\").concat(router.query.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), __jsx(\"link\", {\n    rel: \"canonical\",\n    href: \"\".concat(urlMain, \"/item/\").concat(router.query.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  })), __jsx(Card, {\n    className: classes.page,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(CardContent, {\n    className: isMobileApp ? classes.column : classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, profile.role === 'admin' || ['менеджер', 'организация'].includes(profile.role) && organization._id === employment.organization._id ? data.item !== null || router.query.id === 'new' ? __jsx(React.Fragment, null, __jsx(\"label\", {\n    htmlFor: \"contained-button-file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    className: isMobileApp ? classes.mediaM : classes.mediaD,\n    src: preview,\n    alt: 'Добавить',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: classes.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, __jsx(TextField, {\n    label: \"\\u0418\\u043C\\u044F\",\n    value: name,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setName(event.target.value);\n    },\n    inputProps: {\n      'aria-label': 'description'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: classes.price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, __jsx(TextField, {\n    label: \"\\u0426\\u0435\\u043D\\u0430\",\n    value: price,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setPrice(checkInt(event.target.value));\n    },\n    inputProps: {\n      'aria-label': 'description'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: classes.price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, __jsx(TextField, {\n    label: \"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430\",\n    value: stock,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setStock(checkInt(event.target.value));\n    },\n    inputProps: {\n      'aria-label': 'description'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), profile.role === 'admin' ? __jsx(FormControl, {\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), __jsx(Select, {\n    value: organization._id,\n    onChange: handleOrganization,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, data.organizations.map(function (element) {\n    return __jsx(MenuItem, {\n      key: element._id,\n      value: element._id,\n      ola: element.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, element.name);\n  }))) : __jsx(Input, {\n    value: organization.name,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    inputProps: {\n      'aria-label': 'description',\n      readOnly: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }), __jsx(Button, {\n    size: \"small\",\n    color: \"primary\",\n    onClick: function onClick() {\n      setMiniDialog('Дни поставки', __jsx(DeliveryDays, {\n        deliveryDays: deliveryDays,\n        setDeliveryDays: setDeliveryDays,\n        edit: profile.role === 'admin' || ['менеджер', 'организация'].includes(profile.role) && data.item.organization._id === employment.organization._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }));\n      showMiniDialog(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"\\u0414\\u043D\\u0438 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438 \\u0434\\u043B\\u044F \\u0442\\u043E\\u0440\\u0433\\u043E\\u0432\\u044B\\u0445 \\u0442\\u043E\\u0447\\u0435\\u043A\"), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }), __jsx(FormControl, {\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, __jsx(InputLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"), __jsx(Select, {\n    value: subCategory._id,\n    onChange: handleSubCategory,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, data.subCategorys.map(function (element) {\n    return __jsx(MenuItem, {\n      key: element._id,\n      value: element._id,\n      ola: element.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, element.name);\n  }))), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }), profile.role === 'admin' ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      checked: hit,\n      onChange: function onChange() {\n        setHit(!hit);\n      },\n      color: \"primary\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }),\n    label: \"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u043E\\u0435\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }), __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      checked: latest,\n      onChange: function onChange() {\n        setLatest(!latest);\n      },\n      color: \"primary\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }),\n    label: \"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0430\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  })), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  })) : null, __jsx(TextField, {\n    multiline: true,\n    label: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\",\n    value: info,\n    className: isMobileApp ? classes.inputM : classes.inputD,\n    onChange: function onChange(event) {\n      setInfo(event.target.value);\n    },\n    inputProps: {\n      'aria-label': 'description'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, router.query.id === 'new' ? __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (name.length > 0 && price > 0 && subCategory._id != undefined && organization._id != undefined) {\n                action =\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.next = 2;\n                            return addItem({\n                              name: name,\n                              stock: stock,\n                              image: image,\n                              info: info,\n                              price: price,\n                              subCategory: subCategory._id,\n                              hit: hit,\n                              latest: latest,\n                              organization: organization._id,\n                              deliveryDays: deliveryDays\n                            }, subCategory._id);\n\n                          case 2:\n                            Router.push(\"/items/\".concat(subCategory._id));\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function action() {\n                    return _ref3.apply(this, arguments);\n                  };\n                }();\n\n                setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                  action: action,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 271\n                  },\n                  __self: this\n                }));\n                showMiniDialog(true);\n              } else {\n                showSnackBar('Заполните все поля');\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    })),\n    size: \"small\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\") : __jsx(React.Fragment, null, __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var editElement, action;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              editElement = {\n                _id: data.item._id\n              };\n              if (stock > 0 && stock !== data.item.stock) editElement.stock = stock;\n              if (name.length > 0 && name !== data.item.name) editElement.name = name;\n              if (image !== undefined) editElement.image = image;\n              if (info.length > 0 && info !== data.item.info) editElement.info = info;\n              if (price > 0 && price !== data.item.price) editElement.price = price;\n              if (hit !== data.item.hit) editElement.hit = hit;\n              if (latest !== data.item.latest) editElement.latest = latest;\n              if (organization._id !== data.item.organization._id) editElement.organization = organization._id;\n              if (subCategory._id !== data.item.subCategory._id) editElement.subCategory = subCategory._id;\n              if (deliveryDays) editElement.deliveryDays = deliveryDays;\n\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref5 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee4() {\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return setItem(editElement, subCategory._id);\n\n                        case 2:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function action() {\n                  return _ref5.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 297\n                },\n                __self: this\n              }));\n              showMiniDialog(true);\n\n            case 14:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this);\n    })),\n    size: \"small\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref7 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee6() {\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          _context6.next = 2;\n                          return onoffItem([data.item._id]);\n\n                        case 2:\n                          setStatus(status === 'active' ? 'deactive' : 'active');\n\n                        case 3:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                }));\n\n                return function action() {\n                  return _ref7.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 307\n                },\n                __self: this\n              }));\n              showMiniDialog(true);\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, this);\n    })),\n    size: \"small\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, status === 'active' ? 'Отключить' : 'Включить'), profile.role === 'admin' ? __jsx(Button, {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var action;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              action =\n              /*#__PURE__*/\n              function () {\n                var _ref9 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee8() {\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          _context8.next = 2;\n                          return deleteItem([data.item._id], subCategory._id);\n\n                        case 2:\n                          Router.push(\"/items/\".concat(subCategory._id));\n\n                        case 3:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                }));\n\n                return function action() {\n                  return _ref9.apply(this, arguments);\n                };\n              }();\n\n              setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                action: action,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 319\n                },\n                __self: this\n              }));\n              showMiniDialog(true);\n\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, this);\n    })),\n    size: \"small\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314\n    },\n    __self: this\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\") : null)))) : 'Ничего не найдено' : data.item === null || router.query.id === 'new' ? 'Ничего не найдено' : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.divImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    className: isMobileApp ? classes.mediaM : classes.mediaD,\n    src: data.item.image,\n    alt: data.item.info,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342\n    },\n    __self: this\n  }), profile.role === 'client' || !authenticated ? __jsx(Star, {\n    className: classes.buttonToggle,\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee11() {\n      var index, favorites, i, action;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              if (!(profile.role === 'client')) {\n                _context11.next = 7;\n                break;\n              }\n\n              _context11.next = 3;\n              return favoriteItem([data.item._id]);\n\n            case 3:\n              index = favorite.indexOf(profile._id);\n\n              if (index === -1) {\n                favorite.push(profile._id);\n                setFavorite(_toConsumableArray(favorite));\n              }\n\n              _context11.next = 8;\n              break;\n\n            case 7:\n              if (!authenticated) {\n                favorites = JSON.parse(localStorage.favorites);\n                index = -1;\n\n                for (i = 0; i < favorites.length; i++) {\n                  if (favorites[i]._id == data.item._id) index = i;\n                }\n\n                if (index === -1) {\n                  favorites.push(data.item);\n                  setFavorite(true);\n                  localStorage.favorites = _JSON$stringify(favorites);\n                }\n              }\n\n            case 8:\n              if (index !== -1) {\n                action =\n                /*#__PURE__*/\n                function () {\n                  var _ref11 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee10() {\n                    var _favorites;\n\n                    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n                      while (1) {\n                        switch (_context10.prev = _context10.next) {\n                          case 0:\n                            if (profile.role === 'client') {\n                              favorite.splice(index, 1);\n                              setFavorite(_toConsumableArray(favorite));\n                            } else if (!authenticated) {\n                              _favorites = JSON.parse(localStorage.favorites);\n\n                              _favorites.splice(index, 1);\n\n                              setFavorite(false);\n                              localStorage.favorites = _JSON$stringify(_favorites);\n                            }\n\n                          case 1:\n                          case \"end\":\n                            return _context10.stop();\n                        }\n                      }\n                    }, _callee10);\n                  }));\n\n                  return function action() {\n                    return _ref11.apply(this, arguments);\n                  };\n                }();\n\n                setMiniDialog('Вы уверенны?', __jsx(Confirmation, {\n                  action: action,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 386\n                  },\n                  __self: this\n                }));\n                showMiniDialog(true);\n              }\n\n            case 9:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11, this);\n    })),\n    style: {\n      color: !authenticated && favorite === true || profile.role == 'client' && favorite.includes(profile._id) ? '#ffb300' : '#e1e1e1'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349\n    },\n    __self: this\n  }) : null), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394\n    },\n    __self: this\n  }, isMobileApp ? __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397\n    },\n    __self: this\n  }) : null, __jsx(\"h1\", {\n    className: classes.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401\n    },\n    __self: this\n  }, data.item.name), __jsx(\"div\", {\n    className: classes.share,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404\n    },\n    __self: this\n  }, data.item.organization.name), __jsx(\"div\", {\n    className: classes.deliveryDays,\n    onClick: function onClick() {\n      setMiniDialog('Дни поставки', __jsx(DeliveryDays, {\n        deliveryDays: deliveryDays,\n        setDeliveryDays: setDeliveryDays,\n        edit: profile.role === 'admin' || ['менеджер', 'организация'].includes(profile.role) && data.item.organization._id === employment.organization._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }));\n      showMiniDialog(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407\n    },\n    __self: this\n  }, \"\\u0414\\u043D\\u0438 \\u043F\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438 \\u0434\\u043B\\u044F \\u0442\\u043E\\u0440\\u0433\\u043E\\u0432\\u044B\\u0445 \\u0442\\u043E\\u0447\\u0435\\u043A\"), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.row,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }, data.item.stock === 0 || data.item.stock === undefined ? __jsx(\"div\", {\n    className: classes.price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417\n    },\n    __self: this\n  }, data.item.price, \"\\xA0\\u0441\\u043E\\u043C\") : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: classes.stockPrice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422\n    },\n    __self: this\n  }, data.item.stock, \"\\xA0\\u0441\\u043E\\u043C\"), __jsx(\"div\", {\n    className: classes.crossedPrice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425\n    },\n    __self: this\n  }, data.item.price, \"\\xA0\\u0441\\u043E\\u043C\"))), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }), ['агент', 'client'].includes(profile.role) || !authenticated ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: isMobileApp ? classes.column : classes.rowCenter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.counter,\n    style: isMobileApp ? {\n      marginBottom: 20\n    } : {\n      marginRight: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.counterbtn,\n    onClick: decrement,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437\n    },\n    __self: this\n  }, \"\\u2013\"), __jsx(\"input\", {\n    type: \"text\",\n    className: classes.counternmbr,\n    value: count,\n    onChange: function onChange(event) {\n      setCount(isNaN(event.target.value) || event.target.value.length === 0 ? 0 : _parseInt(event.target.value));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.counterbtn,\n    onClick: increment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441\n    },\n    __self: this\n  }, \"+\")), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    onClick: function onClick() {\n      if (['агент', 'client'].includes(profile.role)) addBasket({\n        item: data.item._id,\n        count: count > 0 ? count : 1\n      });else if (!authenticated) {\n        var basket = JSON.parse(localStorage.basket);\n        var index = -1;\n\n        for (var i = 0; i < basket.length; i++) {\n          if (basket[i].item._id == data.item._id) index = i;\n        }\n\n        if (index === -1) basket.push({\n          item: data.item,\n          count: count\n        });\n        localStorage.basket = _JSON$stringify(basket);\n      }\n      showSnackBar('Товар добавлен в корзину');\n      getCountBasket();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443\n    },\n    __self: this\n  }, \"\\u0412 \\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0423\")), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.share,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F:\"), __jsx(\"div\", {\n    className: classes.rowCenter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472\n    },\n    __self: this\n  }, __jsx(FacebookShareButton, {\n    url: process.browser ? window.location.href.toString() : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473\n    },\n    __self: this\n  }, __jsx(FacebookIcon, {\n    size: 32,\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476\n    },\n    __self: this\n  })), \"\\xA0 \\xA0\", __jsx(VKShareButton, {\n    url: process.browser ? window.location.href : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482\n    },\n    __self: this\n  }, __jsx(VKIcon, {\n    size: 32,\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483\n    },\n    __self: this\n  })), \"\\xA0 \\xA0\", __jsx(OKShareButton, {\n    url: process.browser ? window.location.href : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489\n    },\n    __self: this\n  }, __jsx(OKIcon, {\n    size: 32,\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490\n    },\n    __self: this\n  })), \"\\xA0 \\xA0\", __jsx(WhatsappShareButton, {\n    url: process.browser ? window.location.href : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496\n    },\n    __self: this\n  }, __jsx(WhatsappIcon, {\n    size: 32,\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497\n    },\n    __self: this\n  })), \"\\xA0 \\xA0\", __jsx(TelegramShareButton, {\n    url: process.browser ? window.location.href : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503\n    },\n    __self: this\n  }, __jsx(TelegramIcon, {\n    size: 32,\n    round: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504\n    },\n    __self: this\n  })))) : null)))), __jsx(\"input\", {\n    accept: \"image/*\",\n    style: {\n      display: 'none'\n    },\n    id: \"contained-button-file\",\n    type: \"file\",\n    onChange: handleChangeImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }));\n});\n\nItem.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref12 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee12(ctx) {\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.t0 = _objectSpread;\n            _context12.t1 = {};\n\n            if (!(ctx.query.id !== 'new')) {\n              _context12.next = 8;\n              break;\n            }\n\n            _context12.next = 5;\n            return getItem({\n              _id: ctx.query.id\n            });\n\n          case 5:\n            _context12.t2 = _context12.sent;\n            _context12.next = 9;\n            break;\n\n          case 8:\n            _context12.t2 = {\n              item: {\n                image: '/static/add.png',\n                stock: 0,\n                name: '',\n                info: '',\n                price: 0,\n                subCategory: {\n                  _id: ''\n                },\n                organization: {\n                  _id: ''\n                },\n                hit: false,\n                latest: false,\n                deliveryDays: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс']\n              }\n            };\n\n          case 9:\n            _context12.t3 = _context12.t2;\n            _context12.next = 12;\n            return getOrganizations({\n              search: '',\n              sort: 'name',\n              filter: ''\n            });\n\n          case 12:\n            _context12.t4 = _context12.sent;\n            _context12.next = 15;\n            return getSubCategorys({\n              category: 'all',\n              search: '',\n              sort: 'name',\n              filter: ''\n            });\n\n          case 15:\n            _context12.t5 = _context12.sent;\n            _context12.t6 = (0, _context12.t0)(_context12.t1, _context12.t3, _context12.t4, _context12.t5);\n            return _context12.abrupt(\"return\", {\n              data: _context12.t6\n            });\n\n          case 18:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n\n  return function (_x) {\n    return _ref12.apply(this, arguments);\n  };\n}();\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app,\n    user: state.user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\n    snackbarActions: bindActionCreators(snackbarActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Item);","map":{"version":3,"sources":["C:\\projects\\azyk\\azyk-admin\\pages\\item\\[id].js"],"names":["Head","React","useState","useEffect","App","connect","getSubCategorys","getEmployment","getOrganizations","getItem","addItem","setItem","onoffItem","deleteItem","favoriteItem","addBasket","checkInt","itemStyle","useRouter","Card","CardContent","FormControlLabel","FacebookShareButton","VKShareButton","OKShareButton","WhatsappShareButton","TelegramShareButton","FacebookIcon","VKIcon","OKIcon","TelegramIcon","WhatsappIcon","Button","Input","InputLabel","MenuItem","FormControl","Select","Switch","Router","bindActionCreators","mini_dialogActions","snackbarActions","Star","TextField","Confirmation","urlMain","DeliveryDays","getCountBasket","Item","memo","props","classes","data","router","isMobileApp","app","user","profile","authenticated","item","stock","setStock","name","setName","info","setInfo","price","setPrice","deliveryDays","setDeliveryDays","subCategory","setSubCategory","status","setStatus","handleSubCategory","event","_id","target","value","organization","setOrganization","handleOrganization","hit","setHit","latest","setLatest","image","preview","setPreview","undefined","setImage","employment","setEmployment","handleChangeImage","files","URL","createObjectURL","includes","role","localStorage","favorites","JSON","parse","i","length","setFavorite","basket","count","setCount","increment","decrement","setMiniDialog","showMiniDialog","showSnackBar","favorite","category","filterItem","sortItem","query","id","page","column","row","mediaM","mediaD","inputM","inputD","organizations","map","element","readOnly","subCategorys","action","push","editElement","divImage","buttonToggle","index","indexOf","splice","color","share","stockPrice","crossedPrice","rowCenter","counter","marginBottom","marginRight","counterbtn","counternmbr","isNaN","button","process","browser","window","location","href","toString","display","getInitialProps","ctx","search","sort","filter","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import Head from 'next/head';\r\nimport React, { useState, useEffect } from 'react';\r\nimport App from '../../layouts/App';\r\nimport { connect } from 'react-redux'\r\nimport { getSubCategorys } from '../../src/gql/subcategory'\r\nimport { getEmployment } from '../../src/gql/employment'\r\nimport { getOrganizations } from '../../src/gql/organization'\r\nimport { getItem, addItem, setItem, onoffItem, deleteItem, favoriteItem } from '../../src/gql/items'\r\nimport { addBasket } from '../../src/gql/basket'\r\nimport { checkInt } from '../../src/lib'\r\nimport itemStyle from '../../src/styleMUI/item/item'\r\nimport { useRouter } from 'next/router'\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport {\r\n    FacebookShareButton,\r\n    VKShareButton,\r\n    OKShareButton,\r\n    WhatsappShareButton,\r\n    TelegramShareButton,\r\n    FacebookIcon,\r\n    VKIcon,\r\n    OKIcon,\r\n    TelegramIcon,\r\n    WhatsappIcon,\r\n} from 'react-share';\r\nimport Button from '@material-ui/core/Button';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Router from 'next/router'\r\nimport { bindActionCreators } from 'redux'\r\nimport * as mini_dialogActions from '../../redux/actions/mini_dialog'\r\nimport * as snackbarActions from '../../redux/actions/snackbar'\r\nimport Star from '@material-ui/icons/Star';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Confirmation from '../../components/dialog/Confirmation'\r\nimport { urlMain } from '../../redux/constants/other'\r\nimport DeliveryDays from '../../components/dialog/DeliveryDays';\r\nimport { getCountBasket } from '../../src/gql/basket'\r\n\r\n\r\nconst Item = React.memo((props) => {\r\n    const classes = itemStyle();\r\n    const { data } = props;\r\n    const router = useRouter()\r\n    const { isMobileApp } = props.app;\r\n    const { profile, authenticated } = props.user;\r\n    let [stock, setStock] = useState(data.item!==null?data.item.stock:'');\r\n    let [name, setName] = useState(data.item!==null?data.item.name:'');\r\n    let [info, setInfo] = useState(data.item!==null?data.item.info:'');\r\n    let [price, setPrice] = useState(data.item!==null?data.item.price:'');\r\n    let [deliveryDays, setDeliveryDays] = useState(data.item!==null?data.item.deliveryDays:[]);\r\n    let [subCategory, setSubCategory] = useState(data.item!==null?data.item.subCategory:{});\r\n    let [status, setStatus] = useState(data.item!==null?data.item.status:'');\r\n    let handleSubCategory =  (event) => {\r\n        setSubCategory({_id: event.target.value, name: event.target.name})\r\n    };\r\n    let [organization, setOrganization] = useState(data.item!==null?data.item.organization:{});\r\n    let handleOrganization =  (event) => {\r\n        setOrganization({_id: event.target.value, name: event.target.name})\r\n    };\r\n    let [hit, setHit] = useState(data.item!==null?data.item.hit:false);\r\n    let [latest, setLatest] = useState(data.item!==null?data.item.latest:false);\r\n    let [preview, setPreview] = useState(data.item!==null?data.item.image:'');\r\n    let [image, setImage] = useState(undefined);\r\n    let [employment, setEmployment] = useState({organization: ''});\r\n    let handleChangeImage = ((event) => {\r\n        setImage(event.target.files[0])\r\n        setPreview(URL.createObjectURL(event.target.files[0]))\r\n    })\r\n    useEffect(()=>{\r\n        (async()=>{\r\n            if(['организация', 'менеджер', 'экспедитор'].includes(profile.role)){\r\n                let employment = (await getEmployment({_id: profile._id})).employment\r\n                setOrganization(employment.organization)\r\n                setEmployment(employment)\r\n            }\r\n        })()\r\n    },[profile])\r\n    useEffect(()=>{\r\n        if(!authenticated){\r\n            if(localStorage.favorites==undefined)\r\n                localStorage.favorites = JSON.stringify([])\r\n            else if(data.item!==null){\r\n                let favorites = JSON.parse(localStorage.favorites)\r\n                for(let i=0; i<favorites.length; i++){\r\n                    if(favorites[i]._id == data.item._id)\r\n                        setFavorite(true)\r\n                }\r\n            }\r\n            if(localStorage.basket==undefined)\r\n                localStorage.basket = JSON.stringify([])\r\n        }\r\n    },[])\r\n    //BUY\r\n    let [count, setCount] = useState(0);\r\n    let increment = ()=>{\r\n        count+=1\r\n        setCount(count)\r\n    }\r\n    let decrement = ()=>{\r\n        if(count>0)\r\n            count-=1\r\n            setCount(count)\r\n    }\r\n    const { setMiniDialog, showMiniDialog } = props.mini_dialogActions;\r\n    const { showSnackBar } = props.snackbarActions;\r\n    let [favorite, setFavorite] = useState(data.item!==null&&data.item.favorite!==undefined?data.item.favorite:[]);\r\n    return (\r\n        <App subcategory={data.item.subCategory?data.item.subCategory:undefined} category={data.item.subCategory?data.item.subCategory.category:undefined} filters={data.filterItem} sorts={data.sortItem} pageName={data.item!==null?router.query.id==='new'?'Добавить':data.item.name:'Ничего не найдено'}>\r\n            <Head>\r\n                <title>{data.item!==null?router.query.id==='new'?'Добавить':data.item.name:'Ничего не найдено'}</title>\r\n                <meta name='description' content={data.item!==null?data.item.info:'Ничего не найдено'} />\r\n                <meta property='og:title' content={data.item!==null?router.query.id==='new'?'Добавить':data.item.name:'Ничего не найдено'} />\r\n                <meta property='og:description' content={data.item!==null?data.item.info:'Ничего не найдено'} />\r\n                <meta property='og:type' content='website' />\r\n                <meta property='og:image' content={preview} />\r\n                <meta property=\"og:url\" content={`${urlMain}/item/${router.query.id}`} />\r\n                <link rel='canonical' href={`${urlMain}/item/${router.query.id}`}/>\r\n            </Head>\r\n            <Card className={classes.page}>\r\n                    <CardContent className={isMobileApp?classes.column:classes.row}>\r\n                        {\r\n                            profile.role==='admin'||(['менеджер', 'организация'].includes(profile.role)&&organization._id===employment.organization._id)?\r\n                                data.item!==null||router.query.id==='new'?\r\n                                    <>\r\n                                    <label htmlFor='contained-button-file'>\r\n                                        <img\r\n                                            className={isMobileApp?classes.mediaM:classes.mediaD}\r\n                                            src={preview}\r\n                                            alt={'Добавить'}\r\n                                        />\r\n                                    </label>\r\n                                    <div>\r\n                                        <h1 className={classes.name}>\r\n                                            <TextField\r\n                                                label='Имя'\r\n                                                value={name}\r\n                                                className={isMobileApp?classes.inputM:classes.inputD}\r\n                                                onChange={(event)=>{setName(event.target.value)}}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                }}\r\n                                            />\r\n                                        </h1>\r\n                                            <div className={classes.price}>\r\n                                                <TextField\r\n                                                    label='Цена'\r\n                                                    value={price}\r\n                                                    className={isMobileApp?classes.inputM:classes.inputD}\r\n                                                    onChange={(event)=>{setPrice(checkInt(event.target.value))}}\r\n                                                    inputProps={{\r\n                                                        'aria-label': 'description',\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n                                            <div className={classes.price}>\r\n                                                <TextField\r\n                                                    label='Скидка'\r\n                                                    value={stock}\r\n                                                    className={isMobileApp?classes.inputM:classes.inputD}\r\n                                                    onChange={(event)=>{setStock(checkInt(event.target.value))}}\r\n                                                    inputProps={{\r\n                                                        'aria-label': 'description',\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n                                        {profile.role==='admin'?\r\n                                            <FormControl className={isMobileApp?classes.inputM:classes.inputD}>\r\n                                                <InputLabel>Организация</InputLabel>\r\n                                                <Select value={organization._id}onChange={handleOrganization}>\r\n                                                    {data.organizations.map((element)=>\r\n                                                        <MenuItem key={element._id} value={element._id} ola={element.name}>{element.name}</MenuItem>\r\n                                                    )}\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                            :\r\n                                            <Input\r\n                                                value={organization.name}\r\n                                                className={isMobileApp?classes.inputM:classes.inputD}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                    readOnly: true,\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                        <br/>\r\n                                        <Button size='small' color='primary' onClick={()=>{\r\n                                            setMiniDialog('Дни поставки', <DeliveryDays deliveryDays={deliveryDays} setDeliveryDays={setDeliveryDays} edit={profile.role==='admin'||(['менеджер', 'организация'].includes(profile.role)&&data.item.organization._id===employment.organization._id)}/>)\r\n                                            showMiniDialog(true)\r\n                                        }}>\r\n                                            Дни поставки для торговых точек\r\n                                        </Button>\r\n                                        <br/>\r\n                                        <br/>\r\n                                        <FormControl className={isMobileApp?classes.inputM:classes.inputD}>\r\n                                            <InputLabel>Подкатегория</InputLabel>\r\n                                            <Select value={subCategory._id}onChange={handleSubCategory}>\r\n                                                {data.subCategorys.map((element)=>\r\n                                                    <MenuItem key={element._id} value={element._id} ola={element.name}>{element.name}</MenuItem>\r\n                                                )}\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                        <br/>\r\n                                        {\r\n                                            profile.role==='admin'?\r\n                                                <>\r\n                                                <div className={classes.row}>\r\n                                                    <FormControlLabel\r\n                                                        control={\r\n                                                            <Switch\r\n                                                                checked={hit}\r\n                                                                onChange={()=>{setHit(!hit)}}\r\n                                                                color=\"primary\"\r\n                                                                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                                                            />\r\n                                                        }\r\n                                                        label='Популярное'\r\n                                                    />\r\n                                                    <FormControlLabel\r\n                                                        control={\r\n                                                            <Switch\r\n                                                                checked={latest}\r\n                                                                onChange={()=>{setLatest(!latest)}}\r\n                                                                color=\"primary\"\r\n                                                                inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                                                            />\r\n                                                        }\r\n                                                        label='Новинка'\r\n                                                    />\r\n                                                </div>\r\n                                                <br/>\r\n                                                </>:null\r\n                                        }\r\n                                        <TextField\r\n                                            multiline={true}\r\n                                            label='Информация'\r\n                                            value={info}\r\n                                            className={isMobileApp?classes.inputM:classes.inputD}\r\n                                            onChange={(event)=>{setInfo(event.target.value)}}\r\n                                            inputProps={{\r\n                                                'aria-label': 'description',\r\n                                            }}\r\n                                        />\r\n                                        <br/>\r\n                                        <div className={classes.row}>\r\n                                            {\r\n                                                router.query.id==='new'?\r\n                                                    <Button onClick={async()=>{\r\n                                                        if (name.length>0&&price>0&&subCategory._id!=undefined&&organization._id!=undefined) {\r\n                                                            const action = async() => {\r\n                                                                await addItem({\r\n                                                                    name: name,\r\n                                                                    stock: stock,\r\n                                                                    image: image,\r\n                                                                    info: info,\r\n                                                                    price: price,\r\n                                                                    subCategory: subCategory._id,\r\n                                                                    hit: hit,\r\n                                                                    latest: latest,\r\n                                                                    organization: organization._id,\r\n                                                                    deliveryDays: deliveryDays,\r\n                                                                }, subCategory._id)\r\n                                                                Router.push(`/items/${subCategory._id}`)\r\n                                                            }\r\n                                                            setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                            showMiniDialog(true)\r\n                                                        } else {\r\n                                                            showSnackBar('Заполните все поля')\r\n                                                        }\r\n                                                    }} size='small' color='primary'>\r\n                                                        Добавить\r\n                                                    </Button>\r\n                                                    :\r\n                                                    <>\r\n                                                    <Button onClick={async()=>{\r\n                                                        let editElement = {_id: data.item._id}\r\n                                                        if(stock>0&&stock!==data.item.stock)editElement.stock = stock\r\n                                                        if(name.length>0&&name!==data.item.name)editElement.name = name\r\n                                                        if(image!==undefined)editElement.image = image\r\n                                                        if(info.length>0&&info!==data.item.info)editElement.info = info\r\n                                                        if(price>0&&price!==data.item.price)editElement.price = price\r\n                                                        if(hit!==data.item.hit)editElement.hit = hit\r\n                                                        if(latest!==data.item.latest)editElement.latest = latest\r\n                                                        if(organization._id!==data.item.organization._id)editElement.organization = organization._id\r\n                                                        if(subCategory._id!==data.item.subCategory._id)editElement.subCategory = subCategory._id\r\n                                                        if(deliveryDays)editElement.deliveryDays = deliveryDays\r\n                                                        const action = async() => {\r\n                                                            await setItem(editElement, subCategory._id)\r\n                                                            //Router.push(`/items/${subCategory._id}`)\r\n                                                        }\r\n                                                        setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                        showMiniDialog(true)\r\n                                                    }} size='small' color='primary'>\r\n                                                        Сохранить\r\n                                                    </Button>\r\n                                                    <Button onClick={async()=>{\r\n                                                        const action = async() => {\r\n                                                            await onoffItem([data.item._id])\r\n                                                            setStatus(status==='active'?'deactive':'active')\r\n                                                        }\r\n                                                        setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                        showMiniDialog(true)\r\n                                                    }} size='small' color='primary'>\r\n                                                        {status==='active'?'Отключить':'Включить'}\r\n                                                    </Button>\r\n                                                    {\r\n                                                        profile.role==='admin'?\r\n                                                            <Button onClick={async()=>{\r\n                                                                const action = async() => {\r\n                                                                    await deleteItem([data.item._id], subCategory._id)\r\n                                                                    Router.push(`/items/${subCategory._id}`)\r\n                                                                }\r\n                                                                setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                                showMiniDialog(true)\r\n                                                            }} size='small' color='primary'>\r\n                                                                Удалить\r\n                                                            </Button>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                    </>\r\n                                            }\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    </>\r\n                                    :\r\n                                    'Ничего не найдено'\r\n\r\n                                :\r\n                                data.item===null||router.query.id==='new'?\r\n                                    'Ничего не найдено'\r\n                                    :\r\n                                    <>\r\n                                    <div className={classes.divImage}>\r\n                                        <img\r\n                                            className={isMobileApp?classes.mediaM:classes.mediaD}\r\n                                            src={data.item.image}\r\n                                            alt={data.item.info}\r\n                                        />\r\n                                        {\r\n                                            profile.role==='client'||!authenticated?\r\n                                                <Star className={classes.buttonToggle} onClick={async ()=>{\r\n                                                    let index\r\n                                                    if(profile.role==='client') {\r\n                                                        await favoriteItem([data.item._id])\r\n                                                        index = favorite.indexOf(profile._id)\r\n                                                        if (index === -1) {\r\n                                                            favorite.push(profile._id)\r\n                                                            setFavorite([...favorite])\r\n                                                        }\r\n                                                    }\r\n                                                    else if(!authenticated) {\r\n                                                        let favorites = JSON.parse(localStorage.favorites);\r\n                                                        index = -1\r\n                                                        for(let i=0; i<favorites.length; i++){\r\n                                                            if(favorites[i]._id == data.item._id)\r\n                                                                index = i\r\n                                                        }\r\n                                                        if(index===-1){\r\n                                                            favorites.push(data.item)\r\n                                                            setFavorite(true)\r\n                                                            localStorage.favorites = JSON.stringify(favorites)\r\n                                                        }\r\n                                                    }\r\n\r\n                                                    if (index !== -1) {\r\n                                                        const action = async() => {\r\n                                                            if(profile.role==='client') {\r\n                                                                favorite.splice(index, 1)\r\n                                                                setFavorite([...favorite])\r\n                                                            }\r\n                                                            else if(!authenticated) {\r\n                                                                let favorites = JSON.parse(localStorage.favorites);\r\n                                                                favorites.splice(index, 1)\r\n                                                                setFavorite(false)\r\n                                                                localStorage.favorites = JSON.stringify(favorites)\r\n                                                            }\r\n                                                        }\r\n                                                        setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                        showMiniDialog(true)\r\n                                                    }\r\n                                                }} style={{color: (!authenticated&&favorite===true)||(profile.role=='client'&&favorite.includes(profile._id))?'#ffb300':'#e1e1e1'}}  />\r\n                                                :\r\n                                                null\r\n                                        }\r\n                                    </div>\r\n                                    <div>\r\n                                        {\r\n                                            isMobileApp?\r\n                                                <br/>\r\n                                                :\r\n                                                null\r\n                                        }\r\n                                        <h1 className={classes.name}>\r\n                                            {data.item.name}\r\n                                        </h1>\r\n                                        <div className={classes.share}>\r\n                                            {data.item.organization.name}\r\n                                        </div>\r\n                                        <div className={classes.deliveryDays} onClick={()=>{\r\n                                            setMiniDialog('Дни поставки', <DeliveryDays deliveryDays={deliveryDays} setDeliveryDays={setDeliveryDays} edit={profile.role==='admin'||(['менеджер', 'организация'].includes(profile.role)&&data.item.organization._id===employment.organization._id)}/>)\r\n                                            showMiniDialog(true)\r\n                                        }}>\r\n                                            Дни поставки для торговых точек\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className={classes.row}>\r\n                                            {\r\n                                                data.item.stock===0||data.item.stock===undefined?\r\n                                                    <div className={classes.price}>\r\n                                                        {data.item.price}&nbsp;сом\r\n                                                    </div>\r\n                                                    :\r\n                                                    <>\r\n                                                    <div className={classes.stockPrice}>\r\n                                                        {data.item.stock}&nbsp;сом\r\n                                                    </div>\r\n                                                    <div className={classes.crossedPrice}>\r\n                                                        {data.item.price}&nbsp;сом\r\n                                                    </div>\r\n                                                    </>\r\n                                            }\r\n                                        </div>\r\n                                        <br/>\r\n                                        {\r\n                                            ['агент', 'client'].includes(profile.role)||!authenticated?\r\n                                                <>\r\n                                                <div className={isMobileApp?classes.column:classes.rowCenter}>\r\n                                                    <div className={classes.counter} style={isMobileApp?{marginBottom: 20}:{marginRight: 20}}>\r\n                                                        <div className={classes.counterbtn} onClick={decrement}>–</div>\r\n                                                        <input type='text' className={classes.counternmbr} value={count} onChange={(event)=>{\r\n                                                            setCount(isNaN(event.target.value)||event.target.value.length===0?0:parseInt(event.target.value))\r\n                                                        }}/>\r\n                                                        <div className={classes.counterbtn} onClick={increment}>+</div>\r\n                                                    </div>\r\n                                                    <Button\r\n                                                        variant='contained'\r\n                                                        color='primary'\r\n                                                        className={classes.button}\r\n                                                        onClick={()=>{\r\n                                                            if(['агент', 'client'].includes(profile.role))\r\n                                                                addBasket({item: data.item._id, count: count>0?count:1})\r\n                                                            else if(!authenticated) {\r\n                                                                let basket = JSON.parse(localStorage.basket);\r\n                                                                let index = -1\r\n                                                                for(let i=0; i<basket.length; i++){\r\n                                                                    if(basket[i].item._id == data.item._id)\r\n                                                                        index = i\r\n                                                                }\r\n                                                                if(index===-1)\r\n                                                                    basket.push({item: data.item, count: count})\r\n                                                                localStorage.basket = JSON.stringify(basket)\r\n                                                            }\r\n                                                            showSnackBar('Товар добавлен в корзину')\r\n                                                            getCountBasket()\r\n                                                        }}\r\n                                                    >\r\n                                                        В КОРЗИНУ\r\n                                                    </Button>\r\n                                                </div>\r\n                                                <br/>\r\n                                                <div className={classes.share}>\r\n                                                    Поделиться:\r\n                                                </div>\r\n                                                <div className={classes.rowCenter}>\r\n                                                    <FacebookShareButton\r\n                                                        url={process.browser?window.location.href.toString():''}\r\n                                                    >\r\n                                                        <FacebookIcon\r\n                                                            size={32}\r\n                                                            round />\r\n                                                    </FacebookShareButton>\r\n                                                    &nbsp;\r\n                                                    &nbsp;\r\n                                                    <VKShareButton url={process.browser?window.location.href:''}>\r\n                                                        <VKIcon\r\n                                                            size={32}\r\n                                                            round />\r\n                                                    </VKShareButton>\r\n                                                    &nbsp;\r\n                                                    &nbsp;\r\n                                                    <OKShareButton url={process.browser?window.location.href:''}>\r\n                                                        <OKIcon\r\n                                                            size={32}\r\n                                                            round />\r\n                                                    </OKShareButton>\r\n                                                    &nbsp;\r\n                                                    &nbsp;\r\n                                                    <WhatsappShareButton url={process.browser?window.location.href:''}>\r\n                                                        <WhatsappIcon\r\n                                                            size={32}\r\n                                                            round />\r\n                                                    </WhatsappShareButton>\r\n                                                    &nbsp;\r\n                                                    &nbsp;\r\n                                                    <TelegramShareButton url={process.browser?window.location.href:''}>\r\n                                                        <TelegramIcon\r\n                                                            size={32}\r\n                                                            round />\r\n                                                    </TelegramShareButton>\r\n                                                </div>\r\n                                                </>\r\n                                                :\r\n                                                null\r\n\r\n                                        }\r\n                                    </div>\r\n                                    </>\r\n                        }\r\n\r\n\r\n\r\n\r\n                    </CardContent>\r\n            </Card>\r\n            <input\r\n                accept='image/*'\r\n                style={{ display: 'none' }}\r\n                id='contained-button-file'\r\n                type='file'\r\n                onChange={handleChangeImage}\r\n            />\r\n        </App>\r\n    )\r\n})\r\n\r\nItem.getInitialProps = async function(ctx) {\r\n    return {\r\n        data: {\r\n            ...ctx.query.id!=='new'?await getItem({_id: ctx.query.id}):{\r\n                    item:{\r\n                        image: '/static/add.png',\r\n                        stock: 0,\r\n                        name: '',\r\n                        info: '',\r\n                        price: 0,\r\n                        subCategory: {_id: ''},\r\n                        organization: {_id: ''},\r\n                        hit: false,\r\n                        latest: false,\r\n                        deliveryDays: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс']\r\n                    }\r\n                },\r\n            ...await getOrganizations({search: '', sort: 'name', filter: ''}),\r\n            ...await getSubCategorys({category: 'all', search: '', sort: 'name', filter: ''})\r\n        }\r\n    };\r\n};\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        app: state.app,\r\n        user: state.user,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\r\n        snackbarActions: bindActionCreators(snackbarActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Item);"]},"metadata":{},"sourceType":"module"}