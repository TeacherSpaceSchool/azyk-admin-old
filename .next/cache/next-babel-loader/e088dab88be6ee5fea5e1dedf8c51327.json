{"ast":null,"code":"import { gql } from 'apollo-boost';\nimport { SingletonApolloClient } from '../singleton/client';\nimport { SingletonStore } from '../singleton/store';\nexport const getOrders = async ({\n  search,\n  sort,\n  filter,\n  date\n}) => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    let res = await client.query({\n      variables: {\n        search: search,\n        sort: sort,\n        filter: filter,\n        date: date\n      },\n      query: gql`\n                    query ($search: String!, $sort: String!, $filter: String!, $date: String!) {\n                        invoices(search: $search, sort: $sort, filter: $filter, date: $date) {\n                            _id\n                            agent \n                                {_id name}\n                            createdAt\n                            orders \n                                { \n                                    _id\n                                    createdAt\n                                    item\n                                        {\n                                            image\n                                            _id\n                                            name    \n                                            stock \n                                            price\n                                            organization\n                                                {_id name}\n                                        }\n                                    count\n                                    allPrice\n                                    status\n                                 }\n                            client \n                                { \n                                    _id\n                                    name\n                                    email\n                                    phone \n                                    user \n                                        {_id }\n                                }\n                            allPrice\n                            info\n                            address\n                            paymentMethod\n                            number\n                            confirmationForwarder\n                            confirmationClient\n                            cancelClient\n                            cancelForwarder\n                            taken\n                            dateDelivery\n                            usedBonus\n                        }\n                        sortInvoice {\n                            name\n                            field\n                        }\n                        filterInvoice {\n                           name\n                           value\n                        }\n                    }`\n    });\n    return res.data;\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const getOrdersForRouting = async () => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    let res = await client.query({\n      query: gql`\n                    query{\n                        invoicesForRouting{\n                            _id\n                            agent \n                                {_id name}\n                            createdAt\n                            orders \n                                { \n                                    _id\n                                    createdAt\n                                    item\n                                        {\n                                            image\n                                            _id\n                                            name    \n                                            stock \n                                            price\n                                            organization\n                                                {_id name}\n                                        }\n                                    count\n                                    allPrice\n                                    status\n                                 }\n                            client \n                                { \n                                    _id\n                                    name\n                                    email\n                                    phone \n                                    user \n                                        { _id }\n                                }\n                            allPrice\n                            info\n                            address\n                            paymentMethod\n                            number\n                            confirmationForwarder\n                            confirmationClient\n                            cancelClient\n                            cancelForwarder\n                            taken\n                            dateDelivery\n                            usedBonus\n                        }\n                    }`\n    });\n    return res.data;\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const getOrder = async ({\n  _id\n}) => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    let res = await client.query({\n      variables: {\n        _id: _id\n      },\n      query: gql`\n                    query ($_id: ID!) {\n                        invoice(_id: $_id) {\n                            _id\n                            createdAt\n                            agent: \n                                {_id name}\n                            orders \n                                { \n                                    _id\n                                    createdAt\n                                    item\n                                        {\n                                            image\n                                            _id\n                                            name    \n                                            stock \n                                            price\n                                            organization\n                                                {_id name}\n                                        }\n                                    count\n                                    allPrice\n                                    status\n                                 }\n                            client \n                                { \n                                    _id\n                                    name\n                                    email\n                                    phone\n                                    user \n                                        {_id }\n                                }\n                            allPrice\n                            info\n                            address\n                            paymentMethod\n                            number\n                            confirmationForwarder\n                            cancelClient\n                            cancelForwarder\n                            confirmationClient\n                            taken\n                            dateDelivery\n                            usedBonus\n                        }\n                    }`\n    });\n    return res.data;\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const addOrders = async element => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    await client.mutate({\n      variables: element,\n      mutation: gql`\n                    mutation ($info: String, $usedBonus: Boolean, $paymentMethod: String, $address: [[String]], $organization: ID!, $client: ID!) {\n                        addOrders(usedBonus: $usedBonus, info: $info, paymentMethod: $paymentMethod, address: $address, organization: $organization, client: $client) {\n                             data\n                        }\n                    }`\n    });\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const cancelOrders = async element => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    await client.mutate({\n      variables: element,\n      mutation: gql`\n                    mutation ($_id: [ID]!, $invoice: ID) {\n                        cancelOrders(_id: $_id, invoice: $invoice) {\n                             data\n                        }\n                    }`\n    });\n    return await getOrders(new SingletonStore().getStore().getState().app);\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const approveOrders = async element => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    await client.mutate({\n      variables: element,\n      mutation: gql`\n                    mutation ($invoices: [ID]!, $route: ID) {\n                        approveOrders(invoices: $invoices, route: $route) {\n                             data\n                        }\n                    }`\n    });\n    return await getOrders(new SingletonStore().getStore().getState().app);\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const setInvoice = async element => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    await client.mutate({\n      variables: element,\n      mutation: gql`\n                    mutation ($taken: Boolean, $invoice: ID!, $confirmationClient: Boolean, $confirmationForwarder: Boolean, $cancelClient: Boolean, $cancelForwarder: Boolean) {\n                        setInvoice(taken: $taken, invoice: $invoice, confirmationClient: $confirmationClient, confirmationForwarder: $confirmationForwarder, cancelClient: $cancelClient, cancelForwarder: $cancelForwarder) {\n                             data\n                        }\n                    }`\n    }); //return await getOrders(new SingletonStore().getStore().getState().app)\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const setOrder = async element => {\n  try {\n    const client = new SingletonApolloClient().getClient();\n    await client.mutate({\n      variables: element,\n      mutation: gql`\n                    mutation ($orders: [OrderInput], $invoice: ID) {\n                        setOrder(orders: $orders, invoice: $invoice) {\n                             data\n                        }\n                    }`\n    });\n    return await getOrders(new SingletonStore().getStore().getState().app);\n  } catch (err) {\n    console.error(err);\n  }\n};","map":{"version":3,"sources":["C:\\projects\\azyk\\azyk-admin\\src\\gql\\order.js"],"names":["gql","SingletonApolloClient","SingletonStore","getOrders","search","sort","filter","date","client","getClient","res","query","variables","data","err","console","error","getOrdersForRouting","getOrder","_id","addOrders","element","mutate","mutation","cancelOrders","getStore","getState","app","approveOrders","setInvoice","setOrder"],"mappings":"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","sourcesContent":["import { gql } from 'apollo-boost';\r\nimport { SingletonApolloClient } from '../singleton/client';\r\nimport { SingletonStore } from '../singleton/store';\r\n\r\nexport const getOrders = async({search, sort, filter, date})=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient();\r\n        let res = await client\r\n            .query({\r\n                variables: {search: search, sort: sort, filter: filter, date: date},\r\n                query: gql`\r\n                    query ($search: String!, $sort: String!, $filter: String!, $date: String!) {\r\n                        invoices(search: $search, sort: $sort, filter: $filter, date: $date) {\r\n                            _id\r\n                            agent \r\n                                {_id name}\r\n                            createdAt\r\n                            orders \r\n                                { \r\n                                    _id\r\n                                    createdAt\r\n                                    item\r\n                                        {\r\n                                            image\r\n                                            _id\r\n                                            name    \r\n                                            stock \r\n                                            price\r\n                                            organization\r\n                                                {_id name}\r\n                                        }\r\n                                    count\r\n                                    allPrice\r\n                                    status\r\n                                 }\r\n                            client \r\n                                { \r\n                                    _id\r\n                                    name\r\n                                    email\r\n                                    phone \r\n                                    user \r\n                                        {_id }\r\n                                }\r\n                            allPrice\r\n                            info\r\n                            address\r\n                            paymentMethod\r\n                            number\r\n                            confirmationForwarder\r\n                            confirmationClient\r\n                            cancelClient\r\n                            cancelForwarder\r\n                            taken\r\n                            dateDelivery\r\n                            usedBonus\r\n                        }\r\n                        sortInvoice {\r\n                            name\r\n                            field\r\n                        }\r\n                        filterInvoice {\r\n                           name\r\n                           value\r\n                        }\r\n                    }`,\r\n            })\r\n        return res.data\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const getOrdersForRouting = async()=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient();\r\n        let res = await client\r\n            .query({\r\n                query: gql`\r\n                    query{\r\n                        invoicesForRouting{\r\n                            _id\r\n                            agent \r\n                                {_id name}\r\n                            createdAt\r\n                            orders \r\n                                { \r\n                                    _id\r\n                                    createdAt\r\n                                    item\r\n                                        {\r\n                                            image\r\n                                            _id\r\n                                            name    \r\n                                            stock \r\n                                            price\r\n                                            organization\r\n                                                {_id name}\r\n                                        }\r\n                                    count\r\n                                    allPrice\r\n                                    status\r\n                                 }\r\n                            client \r\n                                { \r\n                                    _id\r\n                                    name\r\n                                    email\r\n                                    phone \r\n                                    user \r\n                                        { _id }\r\n                                }\r\n                            allPrice\r\n                            info\r\n                            address\r\n                            paymentMethod\r\n                            number\r\n                            confirmationForwarder\r\n                            confirmationClient\r\n                            cancelClient\r\n                            cancelForwarder\r\n                            taken\r\n                            dateDelivery\r\n                            usedBonus\r\n                        }\r\n                    }`,\r\n            })\r\n        return res.data\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const getOrder = async({_id})=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        let res = await client\r\n            .query({\r\n                variables: {_id: _id},\r\n                query: gql`\r\n                    query ($_id: ID!) {\r\n                        invoice(_id: $_id) {\r\n                            _id\r\n                            createdAt\r\n                            agent: \r\n                                {_id name}\r\n                            orders \r\n                                { \r\n                                    _id\r\n                                    createdAt\r\n                                    item\r\n                                        {\r\n                                            image\r\n                                            _id\r\n                                            name    \r\n                                            stock \r\n                                            price\r\n                                            organization\r\n                                                {_id name}\r\n                                        }\r\n                                    count\r\n                                    allPrice\r\n                                    status\r\n                                 }\r\n                            client \r\n                                { \r\n                                    _id\r\n                                    name\r\n                                    email\r\n                                    phone\r\n                                    user \r\n                                        {_id }\r\n                                }\r\n                            allPrice\r\n                            info\r\n                            address\r\n                            paymentMethod\r\n                            number\r\n                            confirmationForwarder\r\n                            cancelClient\r\n                            cancelForwarder\r\n                            confirmationClient\r\n                            taken\r\n                            dateDelivery\r\n                            usedBonus\r\n                        }\r\n                    }`,\r\n            })\r\n        return res.data\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const addOrders = async(element)=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        await client.mutate({\r\n            variables: element,\r\n            mutation : gql`\r\n                    mutation ($info: String, $usedBonus: Boolean, $paymentMethod: String, $address: [[String]], $organization: ID!, $client: ID!) {\r\n                        addOrders(usedBonus: $usedBonus, info: $info, paymentMethod: $paymentMethod, address: $address, organization: $organization, client: $client) {\r\n                             data\r\n                        }\r\n                    }`})\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const cancelOrders = async(element)=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        await client.mutate({\r\n            variables: element,\r\n            mutation : gql`\r\n                    mutation ($_id: [ID]!, $invoice: ID) {\r\n                        cancelOrders(_id: $_id, invoice: $invoice) {\r\n                             data\r\n                        }\r\n                    }`})\r\n        return await getOrders(new SingletonStore().getStore().getState().app)\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const approveOrders = async(element)=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        await client.mutate({\r\n            variables: element,\r\n            mutation : gql`\r\n                    mutation ($invoices: [ID]!, $route: ID) {\r\n                        approveOrders(invoices: $invoices, route: $route) {\r\n                             data\r\n                        }\r\n                    }`})\r\n        return await getOrders(new SingletonStore().getStore().getState().app)\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const setInvoice = async(element)=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        await client.mutate({\r\n            variables: element,\r\n            mutation : gql`\r\n                    mutation ($taken: Boolean, $invoice: ID!, $confirmationClient: Boolean, $confirmationForwarder: Boolean, $cancelClient: Boolean, $cancelForwarder: Boolean) {\r\n                        setInvoice(taken: $taken, invoice: $invoice, confirmationClient: $confirmationClient, confirmationForwarder: $confirmationForwarder, cancelClient: $cancelClient, cancelForwarder: $cancelForwarder) {\r\n                             data\r\n                        }\r\n                    }`})\r\n        //return await getOrders(new SingletonStore().getStore().getState().app)\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n\r\nexport const setOrder = async(element)=>{\r\n    try{\r\n        const client = new SingletonApolloClient().getClient()\r\n        await client.mutate({\r\n            variables: element,\r\n            mutation : gql`\r\n                    mutation ($orders: [OrderInput], $invoice: ID) {\r\n                        setOrder(orders: $orders, invoice: $invoice) {\r\n                             data\r\n                        }\r\n                    }`})\r\n        return await getOrders(new SingletonStore().getStore().getState().app)\r\n    } catch(err){\r\n        console.error(err)\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}