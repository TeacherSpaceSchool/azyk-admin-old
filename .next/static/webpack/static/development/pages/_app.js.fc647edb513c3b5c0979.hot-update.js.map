{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.fc647edb513c3b5c0979.hot-update.js","sources":["webpack:///./pages/_app.js","webpack:///./redux/reducers/app.js"],"sourcesContent":["import React from 'react';\r\nimport App  from 'next/app';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport theme from '../src/theme';\r\nimport withRedux from 'next-redux-wrapper';\r\nimport configureStore from '../redux/configureStore'\r\nimport { Provider } from 'react-redux';\r\nimport { SingletonApolloClient } from '../src/singleton/client'\r\nimport { SingletonStore } from '../src/singleton/store'\r\nimport { getProfile } from '../redux/actions/user'\r\nimport { checkMobile, checkAuth } from '../src/lib'\r\n\r\nexport default withRedux(configureStore, { debug: false })(\r\n    class MyApp extends App {\r\n        static componentDidMount() {\r\n            // Remove the server-side injected CSS.\r\n            const jssStyles = document.querySelector('#jss-server-side');\r\n            if (jssStyles) {\r\n                jssStyles.parentNode.removeChild(jssStyles);\r\n            }\r\n        }\r\n        static async getInitialProps({ Component, ctx }) {\r\n            new SingletonApolloClient(ctx.req)\r\n            if(ctx.req){\r\n                ctx.store.getState().app.isMobileApp = checkMobile(ctx.req.headers['user-agent'])\r\n                ctx.store.getState().user.authenticated = checkAuth(ctx.req.headers.cookie)\r\n                if(ctx.store.getState().user.authenticated)\r\n                    ctx.store.getState().user.profile = await getProfile()\r\n            }\r\n            ctx.store.getState().app.search = ''\r\n            ctx.store.getState().app.sort = '-createdAt'\r\n            ctx.store.getState().app.filter = ''\r\n            ctx.store.getState().app.load = false\r\n            ctx.store.getState().mini_dialog.show = false\r\n            return {\r\n                pageProps: {\r\n                    ...(Component.getInitialProps\r\n                        ? await Component.getInitialProps(ctx)\r\n                        : {}),\r\n                }\r\n            };\r\n        }\r\n\r\n        render() {\r\n            const { Component, pageProps, store } = this.props;\r\n            new SingletonStore(store)\r\n            return (\r\n                <React.Fragment>\r\n                    <ThemeProvider theme={theme}>\r\n                        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n                        <CssBaseline />\r\n                        <Provider store={store}>\r\n                                <Component {...pageProps} />\r\n                        </Provider>\r\n                    </ThemeProvider>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    }\r\n\r\n)\r\n","import { SHOW_DRAWER, SET_FILTER, SET_SORT, SET_SEARCH, SET_IS_MOBILE_APP, SHOW_LOAD, SET_COUNT_BASKET } from '../constants/app'\r\n\r\nconst initialState = {\r\n    drawer: false,\r\n    search: '',\r\n    filter: '',\r\n    sort: '-createdAt',\r\n    isMobileApp: undefined,\r\n    load: false,\r\n    countBasket: 0\r\n}\r\n\r\nexport default function mini_dialog(state = initialState, action) {\r\n    switch (action.type) {\r\n        case SHOW_DRAWER:\r\n            return {...state, drawer: action.payload}\r\n        case SET_SORT:\r\n            return {...state, sort: action.payload}\r\n        case SET_FILTER:\r\n            return {...state, filter: action.payload}\r\n        case SET_SEARCH:\r\n            return {...state, search: action.payload}\r\n        case SET_IS_MOBILE_APP:\r\n            return {...state, isMobileApp: action.payload}\r\n        case SHOW_LOAD:\r\n            return {...state, load: action.payload}\r\n        case SET_COUNT_BASKET:\r\n            return {...state, countBasket: action.payload}\r\n        default:\r\n            return state\r\n    }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AA+BA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AA7CA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAeA;AACA;AAhBA;AAiBA;AACA;AACA;AACA;AACA;AArBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAuBA;AAvBA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;;;;;;;;;;;;;;;;;ACbA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAUA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAhBA;AAkBA;;;;A","sourceRoot":""}