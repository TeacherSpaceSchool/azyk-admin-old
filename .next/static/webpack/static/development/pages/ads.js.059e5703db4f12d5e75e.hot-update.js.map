{"version":3,"file":"static/webpack/static\\development\\pages\\ads.js.059e5703db4f12d5e75e.hot-update.js","sources":["webpack:///./pages/ads.js"],"sourcesContent":["import Head from 'next/head';\r\nimport React, { useState, useEffect } from 'react';\r\nimport App from '../layouts/App';\r\nimport CardAds from '../components/ads/CardAds';\r\nimport pageListStyle from '../src/styleMUI/ads/adsList'\r\nimport {getAdss} from '../src/gql/ads'\r\nimport { connect } from 'react-redux'\r\nimport { urlMain } from '../redux/constants/other'\r\nimport LazyLoad from 'react-lazyload';\r\nimport CardAdsPlaceholder from '../components/ads/CardAdsPlaceholder'\r\n\r\nconst Ads = React.memo((props) => {\r\n    const classes = pageListStyle();\r\n    const { data } = props;\r\n    let [list, setList] = useState(data.adss);\r\n    const { search, filter, sort } = props.app;\r\n    const { profile } = props.user;\r\n    const { count } = props.pagination;\r\n    useEffect(()=>{\r\n        (async()=>{\r\n            setList((await getAdss({search: search, sort: sort, filter: filter})).adss)\r\n        })()\r\n    },[filter, sort, search, count])\r\n    let height = profile.role==='admin'?400:200\r\n    return (\r\n        <App filters={data.filterAds} sorts={data.sortAds} pageName='Акции'>\r\n            <Head>\r\n                <title>Акции</title>\r\n                <meta name='description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:title' content='Акции' />\r\n                <meta property='og:description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:type' content='website' />\r\n                <meta property='og:image' content={`${urlMain}/static/512x512.png`} />\r\n                <meta property=\"og:url\" content={`${urlMain}/ads`} />\r\n                <link rel='canonical' href={`${urlMain}/ads`}/>\r\n            </Head>\r\n            <div className={classes.page}>\r\n                {profile.role==='admin'?<CardAds setList={setList}/>:null}\r\n                {list?list.map((element)=>\r\n                    <LazyLoad scrollContainer={'.App-body'} key={element._id} height={height} offset={[height, 0]} debounce={50}  placeholder={<CardAdsPlaceholder height={height}/>}>\r\n                        <CardAds setList={setList} key={element._id} element={element}/>\r\n                    </LazyLoad>\r\n                ):null}\r\n            </div>\r\n        </App>\r\n    )\r\n})\r\n\r\nAds.getInitialProps = async function(ctx) {\r\n    ctx.store.getState().pagination.work = true\r\n    return {\r\n        data: await getAdss({search: '', sort: '-createdAt', filter: ''}),\r\n    };\r\n};\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        app: state.app,\r\n        user: state.user,\r\n        pagination: state.pagination\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Ads);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAGA;AAHA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;;;;A","sourceRoot":""}