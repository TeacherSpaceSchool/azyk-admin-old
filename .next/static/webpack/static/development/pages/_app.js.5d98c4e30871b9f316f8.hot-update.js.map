{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.5d98c4e30871b9f316f8.hot-update.js","sources":["webpack:///./src/getClientGQL.js"],"sourcesContent":["/* eslint-disable no-extra-boolean-cast */\r\nimport { urlGQL } from '../redux/constants/other';\r\nimport { ApolloClient } from 'apollo-client';\r\nimport { InMemoryCache } from 'apollo-cache-inmemory';\r\nimport fetch from 'node-fetch';\r\nimport { getJWT } from './lib'\r\nimport { setContext } from 'apollo-link-context';\r\nimport { ApolloLink  } from 'apollo-link';\r\nimport { createUploadLink } from 'apollo-upload-client'\r\n\r\nexport const getClientGqlSsr = (req) => {\r\n        const uploadLink = createUploadLink({\r\n            uri: urlGQL,\r\n            fetch: fetch,\r\n            credentials: 'include'\r\n        });\r\n        const authLink = setContext((_, { headers }) => {\r\n            return {\r\n                headers: {\r\n                    ...headers,\r\n                    authorization: getJWT(req.headers.cookie) ? `Bearer ${getJWT(req.headers.cookie)}` : '',\r\n                }\r\n            }\r\n        });\r\n        const link = ApolloLink.from([\r\n            authLink,\r\n            uploadLink\r\n        ]);\r\n    return new ApolloClient({\r\n            ssrMode: true,\r\n            link: link,\r\n            cache: new InMemoryCache(),\r\n            defaultOptions: {\r\n                watchQuery: {\r\n                    fetchPolicy: 'cache-and-network',\r\n                    errorPolicy: 'ignore',\r\n                },\r\n                query: {\r\n                    fetchPolicy: 'network-only',\r\n                    errorPolicy: 'all',\r\n                },\r\n                mutate: {\r\n                    errorPolicy: 'all',\r\n                },\r\n            },\r\n\r\n        })\r\n    }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAAA;AACA;AACA;AAEA;AAFA;AADA;AAMA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AADA;AATA;AAJA;AAmBA;;;;A","sourceRoot":""}