{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.514fe4d9c6cfdf509cf1.hot-update.js","sources":["webpack:///./components/category/CardCategoryPlaceholder.js","webpack:///./pages/index.js","webpack:///./src/styleMUI/category/cardcategory.js"],"sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport cardCategoryStyle from '../../src/styleMUI/category/cardcategory'\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nconst CardCategoryPlaceholder = React.memo((props) => {\r\n    const classes = cardCategoryStyle();\r\n    const { height } = props;\r\n    const { isMobileApp } = props.app;\r\n    return (\r\n        <div className={isMobileApp?classes.cardM:classes.cardD} style={{height: height}}>\r\n            <Skeleton variant=\"rect\" height=\"100%\"/>\r\n        </div>\r\n    );\r\n})\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        user: state.user,\r\n        app: state.app\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CardCategoryPlaceholder)","import Head from 'next/head';\r\nimport React, { useState, useEffect } from 'react';\r\nimport App from '../layouts/App';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport * as userActions from '../redux/actions/user'\r\nimport { getCategorys } from '../src/gql/category'\r\nimport pageListStyle from '../src/styleMUI/category/categoryList'\r\nimport CardCategory from '../components/category/CardCategory'\r\nimport { urlMain } from '../redux/constants/other'\r\nimport Router from 'next/router'\r\nimport LazyLoad from 'react-lazyload';\r\nimport CardCategoryPlaceholder from '../components/category/CardCategoryPlaceholder'\r\n\r\nconst Index = React.memo((props) => {\r\n    const classes = pageListStyle();\r\n    const { data } = props;\r\n    let [list, setList] = useState(data.categorys);\r\n    const { search, filter, sort } = props.app;\r\n    const { profile, authenticated } = props.user;\r\n    let height = profile.role==='admin'?161:83\r\n    useEffect(()=>{\r\n        (async()=>{\r\n            setList((await getCategorys({search: search, sort: sort, filter: filter})).categorys)\r\n        })()\r\n    },[filter, sort, search])\r\n    useEffect(()=>{\r\n        if(!(!authenticated||['admin', 'client'].includes(profile.role)||!profile.role))\r\n            Router.push('/items/all')\r\n    },[profile, authenticated])\r\n    return (\r\n        <App filters={data.filterCategory} sorts={data.sortCategory} pageName='Товары'>\r\n            <Head>\r\n                <title>Азык - электронный склад связывающий производителя с торговой точкой</title>\r\n                <meta name='description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:title' content='Азык - электронный склад связывающий производителя с торговой точкой' />\r\n                <meta property='og:description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:type' content='website' />\r\n                <meta property='og:image' content={`${urlMain}/static/512x512.png`} />\r\n                <meta property=\"og:url\" content={`${urlMain}`} />\r\n                <link rel='canonical' href={`${urlMain}`}/>\r\n            </Head>\r\n            <div className={classes.page}>\r\n                {profile.role==='admin'?\r\n                    <>\r\n                    <CardCategory setList={setList}/>\r\n                    </>\r\n                    :\r\n                    null\r\n                }\r\n                <CardCategory element={{image: '/static/add.png', name: 'Все подкатегории', _id: 'all'}} setList='all'/>\r\n                {list?list.map((element)=>\r\n                    element.name!=='Не задано'?\r\n                        <LazyLoad scrollContainer={'.App-body'} key={element._id} height={height} offset={[height, 0]} debounce={100}  placeholder={<CardCategoryPlaceholder height={height}/>}>\r\n                            <CardCategory key={element._id} setList={setList} element={element}/>\r\n                        </LazyLoad>\r\n                        :\r\n                        null\r\n                ):null}\r\n            </div>\r\n        </App>\r\n    )\r\n})\r\n\r\nIndex.getInitialProps = async function(ctx) {\r\n    let role = ctx.store.getState().user.profile.role\r\n    let authenticated = ctx.store.getState().user.authenticated\r\n    if(!(!authenticated||['admin', 'client'].includes(role)||!role))\r\n        if(ctx.res) {\r\n            ctx.res.writeHead(302, {\r\n                Location: '/items/all'\r\n            })\r\n            ctx.res.end()\r\n        } else\r\n            Router.push('/items/all')\r\n    return {\r\n        data: await getCategorys({search: '', sort: '-createdAt', filter: ''})\r\n    };\r\n};\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        user: state.user,\r\n        app: state.app,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n     }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","import { makeStyles } from '@material-ui/core/styles';\r\nexport default makeStyles({\r\n    cardM: {\r\n        width: 'calc(100vw - 40px)',\r\n        marginBottom: 20\r\n    },\r\n    cardD: {\r\n        width: 400,\r\n        margin: 10\r\n    },\r\n    media: {\r\n        objectFit: 'cover',\r\n        height: '60px',\r\n        width: '60px',\r\n        marginRight: 10\r\n    },\r\n    avatar: {\r\n        borderRadius: '50px',\r\n        objectFit: 'cover',\r\n        height: '100px',\r\n        width: '100px',\r\n        margin: 10\r\n    },\r\n    text: {\r\n        fontWeight: 'bold',\r\n        fontSize: '16px',\r\n        fontFamily: 'Roboto'\r\n    },\r\n    inputM: {\r\n        marginBottom: 5,\r\n        width: 'calc(100vw - 82px)',\r\n        fontSize: '16px',\r\n        fontFamily: 'Roboto'\r\n    },\r\n    inputD: {\r\n        marginBottom: 5,\r\n        width: 400-82,\r\n        fontSize: '16px',\r\n        fontFamily: 'Roboto'\r\n    },\r\n    line: {\r\n        margin: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        flexDirection: 'row',\r\n    },\r\n})"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AADA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAWA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AATA;AAAA;AAYA;AAAA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AAYA;AAZA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;;;;;;;;;AC7FA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AALA;AAvCA;;;;A","sourceRoot":""}