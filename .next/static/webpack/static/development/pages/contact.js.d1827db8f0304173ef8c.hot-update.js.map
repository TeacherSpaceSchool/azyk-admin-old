{"version":3,"file":"static/webpack/static\\development\\pages\\contact.js.d1827db8f0304173ef8c.hot-update.js","sources":["webpack:///./pages/contact.js"],"sourcesContent":["import Head from 'next/head';\r\nimport React, { useState } from 'react';\r\nimport App from '../layouts/App';\r\nimport { connect } from 'react-redux'\r\nimport { getContact, setContact } from '../src/gql/contact'\r\nimport contactStyle from '../src/styleMUI/contact'\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Input from '@material-ui/core/Input';\r\nimport Button from '@material-ui/core/Button';\r\nimport { bindActionCreators } from 'redux'\r\nimport * as mini_dialogActions from '../redux/actions/mini_dialog'\r\nimport Add from '@material-ui/icons/Add';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Confirmation from '../components/dialog/Confirmation'\r\nimport AddSocial from '../components/dialog/AddSocial'\r\nimport { urlMain } from '../redux/constants/other'\r\n\r\nconst Contact = React.memo((props) => {\r\n    const classes = contactStyle();\r\n    const { data } = props;\r\n    const { isMobileApp } = props.app;\r\n    let [name, setName] = useState(data.contact.name);\r\n    let [address, setAddress] = useState(data.contact.address);\r\n    let [newAddress, setNewAddress] = useState('');\r\n    let addAddress = ()=>{\r\n        address = [...address, newAddress]\r\n        setAddress(address)\r\n        setNewAddress('')\r\n    };\r\n    let editAddress = (event, idx)=>{\r\n        address[idx] = event.target.value\r\n        setAddress([...address])\r\n    };\r\n    let deleteAddress = (idx)=>{\r\n        address.splice(idx, 1);\r\n        setAddress([...address])\r\n    };\r\n    let [email, setEmail] = useState(data.contact.email);\r\n    let [newEmail, setNewEmail] = useState('');\r\n    let addEmail = ()=>{\r\n        email = [...email, newEmail]\r\n        setEmail(email)\r\n        setNewEmail('')\r\n    };\r\n    let editEmail = (event, idx)=>{\r\n        email[idx] = event.target.value\r\n        setEmail([...email])\r\n    };\r\n    let deleteEmail = (idx)=>{\r\n        email.splice(idx, 1);\r\n        setEmail([...email])\r\n    };\r\n    let [phone, setPhone] = useState(data.contact.phone);\r\n    let [newPhone, setNewPhone] = useState('');\r\n    let addPhone = ()=>{\r\n        phone = [...phone, newPhone]\r\n        setPhone(phone)\r\n        setNewPhone('')\r\n    };\r\n    let editPhone = (event, idx)=>{\r\n        phone[idx] = event.target.value\r\n        setPhone([...phone])\r\n    };\r\n    let deletePhone = (idx)=>{\r\n        phone.splice(idx, 1);\r\n        setPhone([...phone])\r\n    };\r\n    let [social, setSocial] = useState(data.contact.social);\r\n    let addSocial = (value, idx)=>{\r\n        social[idx] = value\r\n        setSocial([...social])\r\n    };\r\n    console.log(social)\r\n    let [info, setInfo] = useState(data.contact.info);\r\n    let [preview, setPreview] = useState(data.contact.image===''?'/static/add.png':data.contact.image);\r\n    let [image, setImage] = useState(undefined);\r\n    let handleChangeImage = ((event) => {\r\n        setImage(event.target.files[0])\r\n        setPreview(URL.createObjectURL(event.target.files[0]))\r\n    })\r\n    const { profile } = props.user;\r\n    const { setMiniDialog, showMiniDialog } = props.mini_dialogActions;\r\n    return (\r\n        <App filters={data.filterSubCategory} sorts={data.sortSubCategory} pageName='Контакты'>\r\n            <Head>\r\n                <title>{name}</title>\r\n                <meta name='description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:title' content='Азык - электронный склад связывающий производителя с торговой точкой' />\r\n                <meta property='og:description' content='Азык – это онлайн платформа для заказа товаров оптом, разработанная специально для малого и среднего бизнеса.  Она объединяет производителей и торговые точки напрямую, сокращая расходы и повышая продажи. Азык предоставляет своим пользователям мощные технологии для масштабирования и развития своего бизнеса.' />\r\n                <meta property='og:type' content='website' />\r\n                <meta property='og:image' content={`${urlMain}/static/512x512.png`} />\r\n                <meta property=\"og:url\" content={`${urlMain}/contact`} />\r\n                <link rel='canonical' href={`${urlMain}/contact`}/>\r\n            </Head>\r\n            <Card className={classes.page}>\r\n                    <CardContent className={isMobileApp?classes.column:classes.row}>\r\n                        {\r\n                            profile.role==='admin'?\r\n                                <>\r\n                                    <div className={classes.column}>\r\n                                        <label htmlFor='contained-button-file'>\r\n                                            <img\r\n                                                className={classes.media}\r\n                                                src={preview}\r\n                                                alt={'Добавить'}\r\n                                            />\r\n                                        </label>\r\n                                        Наши страницы\r\n                                        <div className={classes.row}>\r\n                                            <img src='/static/instagram.svg' onClick={()=>{\r\n                                                setMiniDialog('Instagram', <AddSocial social={social[0]} action={addSocial} idx={0}/>)\r\n                                                showMiniDialog(true)\r\n                                            }} className={classes.mediaSocial}/>\r\n                                            <img src='/static/facebook.svg' onClick={()=>{\r\n                                                setMiniDialog('Facebook', <AddSocial social={social[1]} action={addSocial} idx={0}/>)\r\n                                                showMiniDialog(true)\r\n                                            }} className={classes.mediaSocial}/>\r\n                                            <img src='/static/twitter.svg' onClick={()=>{\r\n                                                setMiniDialog('Twitter', <AddSocial social={social[2]} action={addSocial} idx={0}/>)\r\n                                                showMiniDialog(true)\r\n                                            }} className={classes.mediaSocial}/>\r\n                                            <img src='/static/telegram.svg' onClick={()=>{\r\n                                                setMiniDialog('Telegram', <AddSocial social={social[3]} action={addSocial} idx={0}/>)\r\n                                                showMiniDialog(true)\r\n                                            }} className={classes.mediaSocial}/>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <TextField\r\n                                                label='Имя'\r\n                                                value={name}\r\n                                                className={classes.input}\r\n                                                onChange={(event)=>{setName(event.target.value)}}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                }}\r\n                                            />\r\n                                        <FormControl className={classes.input}>\r\n                                            <InputLabel>Добавить адрес</InputLabel>\r\n                                            <Input\r\n                                                value={newAddress}\r\n                                                onChange={(event)=>{setNewAddress(event.target.value)}}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                }}\r\n                                                endAdornment={\r\n                                                    <InputAdornment position=\"end\">\r\n                                                        <IconButton\r\n                                                            onClick={()=>{\r\n                                                                addAddress()\r\n                                                            }}\r\n                                                            aria-label='toggle password visibility'\r\n                                                        >\r\n                                                            <Add/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                        {address.map((element, idx)=>\r\n                                            <FormControl  key={idx} className={classes.input}>\r\n                                                <InputLabel>Адрес</InputLabel>\r\n                                                <Input\r\n                                                    placeholder='Адрес'\r\n                                                    value={element}\r\n                                                    onChange={(event)=>{editAddress(event, idx)}}\r\n                                                    inputProps={{\r\n                                                        'aria-label': 'description',\r\n                                                    }}\r\n                                                    endAdornment={\r\n                                                        <InputAdornment position=\"end\">\r\n                                                            <IconButton\r\n                                                                onClick={()=>{\r\n                                                                    deleteAddress(idx)\r\n                                                                }}\r\n                                                                aria-label='toggle password visibility'\r\n                                                            >\r\n                                                                <Remove/>\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    }\r\n                                                />\r\n                                            </FormControl>\r\n                                        )}\r\n                                        <FormControl className={classes.input}>\r\n                                            <InputLabel>Добавить email</InputLabel>\r\n                                            <Input\r\n                                                value={newEmail}\r\n                                                onChange={(event)=>{setNewEmail(event.target.value)}}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                }}\r\n                                                endAdornment={\r\n                                                    <InputAdornment position=\"end\">\r\n                                                        <IconButton\r\n                                                            onClick={()=>{\r\n                                                                addEmail()\r\n                                                            }}\r\n                                                            aria-label='toggle password visibility'\r\n                                                        >\r\n                                                            <Add/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                        {email.map((element, idx)=>\r\n                                            <FormControl  key={idx} className={classes.input}>\r\n                                                <InputLabel>Организация</InputLabel>\r\n                                                <Input\r\n                                                    value={element}\r\n                                                    onChange={(event)=>{editEmail(event, idx)}}\r\n                                                    inputProps={{\r\n                                                        'aria-label': 'description',\r\n                                                    }}\r\n                                                    endAdornment={\r\n                                                        <InputAdornment position=\"end\">\r\n                                                            <IconButton\r\n                                                                onClick={()=>{\r\n                                                                    deleteEmail(idx)\r\n                                                                }}\r\n                                                                aria-label='toggle password visibility'\r\n                                                            >\r\n                                                                <Remove/>\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    }\r\n                                                />\r\n                                            </FormControl>\r\n                                        )}\r\n                                        <FormControl className={classes.input}>\r\n                                            <InputLabel>Добавить телефон. Формат: +996555780861</InputLabel>\r\n                                            <Input\r\n                                                value={newPhone}\r\n                                                onChange={(event)=>{setNewPhone(event.target.value)}}\r\n                                                inputProps={{\r\n                                                    'aria-label': 'description',\r\n                                                }}\r\n                                                endAdornment={\r\n                                                    <InputAdornment position=\"end\">\r\n                                                        <IconButton\r\n                                                            onClick={()=>{\r\n                                                                addPhone()\r\n                                                            }}\r\n                                                            aria-label='toggle password visibility'\r\n                                                        >\r\n                                                            <Add/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                        {phone.map((element, idx)=>\r\n                                            <FormControl key={idx} className={classes.input}>\r\n                                                <InputLabel>Организация</InputLabel>\r\n                                                <Input\r\n                                                    value={element}\r\n                                                    onChange={(event)=>{editPhone(event, idx)}}\r\n                                                    inputProps={{\r\n                                                        'aria-label': 'description',\r\n                                                    }}\r\n                                                    endAdornment={\r\n                                                        <InputAdornment position=\"end\">\r\n                                                            <IconButton\r\n                                                                onClick={()=>{\r\n                                                                    deletePhone(idx)\r\n                                                                }}\r\n                                                                aria-label='toggle password visibility'\r\n                                                            >\r\n                                                                <Remove/>\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    }\r\n                                                />\r\n                                            </FormControl>\r\n                                        )}\r\n                                        <TextField\r\n                                            multiline={true}\r\n                                            label='Информация'\r\n                                            value={info}\r\n                                            className={classes.input}\r\n                                            onChange={(event)=>{setInfo(event.target.value)}}\r\n                                            inputProps={{\r\n                                                'aria-label': 'description',\r\n                                            }}\r\n                                        />\r\n                                        <div className={classes.row}>\r\n                                            <Button onClick={async()=>{\r\n                                                let editElement = {\r\n                                                    name: name,\r\n                                                    address: address,\r\n                                                    email: email,\r\n                                                    phone: phone,\r\n                                                    social: social,\r\n                                                    info: info\r\n                                                }\r\n                                                if(image!==undefined)editElement.image = image\r\n                                                const action = async() => {\r\n                                                    await setContact(editElement)\r\n                                                }\r\n                                                setMiniDialog('Вы уверенны?', <Confirmation action={action}/>)\r\n                                                showMiniDialog(true)\r\n                                            }} size='small' color='primary'>\r\n                                                Сохранить\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                    </>\r\n                                :\r\n                                <>\r\n                                <div className={classes.column}>\r\n                                    <img\r\n                                        className={classes.media}\r\n                                        src={preview}\r\n                                        alt={name}\r\n                                    />\r\n                                    {\r\n                                        social[0].length>0||social[1].length>0||social[2].length>0||social[3].length>0?\r\n                                            <>\r\n                                        Наши страницы\r\n                                        <div className={classes.row}>\r\n                                            {\r\n                                                social[0].length>0?\r\n                                                    <a href={social[0]}>\r\n                                                        <img src='/static/instagram.svg' className={classes.mediaSocial}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            {\r\n                                                social[1].length>0?\r\n                                                    <a href={social[1]}>\r\n                                                        <img src='/static/facebook.svg' className={classes.mediaSocial}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            {\r\n                                                social[2].length>0?\r\n                                                    <a href={social[2]}>\r\n                                                        <img src='/static/twitter.svg' className={classes.mediaSocial}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            {\r\n                                                social[3].length>0?\r\n                                                    <a href={social[3]}>\r\n                                                        <img src='/static/telegram.svg' className={classes.mediaSocial}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n\r\n                                            }\r\n                                        </div>\r\n                                        </>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </div>\r\n                                            <div>\r\n                                                <div className={classes.name}>\r\n                                                    {name}\r\n                                                </div>\r\n                                                <br/>\r\n                                                <div className={classes.row}>\r\n                                                    <div className={classes.nameField}>\r\n                                                        Адрес:&nbsp;\r\n                                                    </div>\r\n                                                    <div className={classes.column}>\r\n                                                        {address.map((element, idx)=>\r\n                                                            <div key={idx} className={classes.value}>\r\n                                                                {element}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className={classes.row}>\r\n                                                    <div className={classes.nameField}>\r\n                                                        Телефон:&nbsp;\r\n                                                    </div>\r\n                                                    <div className={classes.column}>\r\n                                                        {phone.map((element, idx)=>\r\n                                                            <a href={`tel:${element}`} key={idx} className={classes.value}>\r\n                                                                {element}\r\n                                                            </a>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className={classes.row}>\r\n                                                    <div className={classes.nameField}>\r\n                                                        E-mail:&nbsp;\r\n                                                    </div>\r\n                                                    <div className={classes.column}>\r\n                                                        {email.map((element, idx)=>\r\n                                                            <a href={`mailto:${element}`} key={idx} className={classes.value}>\r\n                                                                {element}\r\n                                                            </a>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <br/>\r\n                                                <div className={classes.info}>\r\n                                                    {info}\r\n                                                </div>\r\n                                            </div>\r\n                                            </>\r\n                        }\r\n                        </CardContent>\r\n                </Card>\r\n            <input\r\n                accept='image/*'\r\n                style={{ display: 'none' }}\r\n                id='contained-button-file'\r\n                type='file'\r\n                onChange={handleChangeImage}\r\n            />\r\n        </App>\r\n    )\r\n})\r\n\r\nContact.getInitialProps = async function() {\r\n    return {\r\n        data: {\r\n            ...await getContact()\r\n        }\r\n\r\n    };\r\n};\r\n\r\nfunction mapStateToProps (state) {\r\n    return {\r\n        user: state.user,\r\n        app: state.app\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        mini_dialogActions: bindActionCreators(mini_dialogActions, dispatch),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Contact);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AApBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAqBA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAnCA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAoCA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAlDA;AAAA;AAAA;AACA;AAkDA;AACA;AACA;AACA;AACA;AAAA;AACA;AAxDA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AA0DA;AACA;AACA;AACA;AACA;AA/DA;AAAA;AAAA;AAAA;AAiEA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AAOA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAHA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAHA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAHA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAHA;AAQA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AADA;AALA;AASA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AARA;AAoBA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AATA;AAHA;AAyBA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AARA;AAoBA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AARA;AAHA;AAwBA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AARA;AAoBA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AARA;AAHA;AAyBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AADA;AANA;AAUA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AAVA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAAA;AAAA;AACA;AAYA;AAAA;AAAA;AACA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAfA;AAuBA;AAAA;AAEA;AACA;AACA;AAHA;AASA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AAAA;AAaA;AAAA;AAIA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AACA;AAAA;AAAA;AADA;AAOA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AADA;AAOA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AADA;AAQA;AAAA;AASA;AACA;AAAA;AAAA;AACA;AACA;AACA;AALA;AASA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}