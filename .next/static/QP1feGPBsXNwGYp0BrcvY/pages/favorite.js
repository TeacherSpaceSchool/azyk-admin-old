(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+pcz":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0zm18.31 6l-2.76 5z"}),r.default.createElement("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"})),"AddShoppingCart");t.default=i},IvQJ:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorite",function(){var e=a("fGTc");return{page:e.default||e}}])},XZkx:function(e,t,a){"use strict";var n=a("dfwq"),r=a("ln6h"),i=a.n(r),o=a("O40h"),c=a("9Jkg"),s=a.n(c),l=a("q1tI"),u=a.n(l),f=a("30+C"),d=a("lFIR"),p=a("oa/T"),m=a("R/WZ"),v=Object(m.a)({card:{width:280,margin:10},column:{display:"flex",flexDirection:"column",alignItems:"center"},row:{display:"flex",flexDirection:"row",justifyContent:"center"},media:{height:180,width:180,objectFit:"contain",marginBottom:20,cursor:"pointer"},name:{fontSize:"0.95rem",fontFamily:"Roboto",maxHeight:35,overflow:"hidden",textOverflow:"ellipsis",marginBottom:10,wordBreak:"break-all",textAlign:"center"},price:{fontWeight:"bold",fontSize:"1.3rem",fontFamily:"Roboto",height:20,overflow:"hidden",textOverflow:"ellipsis",marginBottom:10},crossedPrice:{color:"#C0C0C0",textDecoration:"line-through",fontWeight:"bold",fontSize:"1rem",fontFamily:"Roboto",height:18,width:70,marginRight:3,marginTop:2,overflow:"hidden",textOverflow:"ellipsis",textAlign:"right",marginBottom:10},stockPrice:{marginLeft:3,color:"#ff0000",fontWeight:"bold",fontSize:"1.3rem",fontFamily:"Roboto",height:20,width:100,overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",marginBottom:10},button:{height:50,width:50},buttonToggle:{height:30,width:30,position:"absolute",top:10,right:10,cursor:"pointer"},chipList:{position:"absolute",top:5,left:5},chip:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontFamily:"Roboto",width:60,height:16,marginBottom:2}}),h=a("/MKj"),g=a("ANjH"),b=a("pngM"),w=a("//vS"),O=a("UgXd"),k=a.n(O),j=a("+pcz"),x=a.n(j),S=a("aUVD"),y=a.n(S),_=a("YFqc"),N=a.n(_),z=a("XHc+"),C=a("GXDu"),J=a("Z3vd"),F=a("UUyv"),L=u.a.createElement,I=k()(function(){return a.e(2).then(a.bind(null,"y4xb"))},{loadableGenerated:{webpack:function(){return["y4xb"]},modules:["../dialog/Confirmation"]}}),A=u.a.memo(function(e){var t=v(),a=e.element,r=e.setList,c=e.subCategory,m=e.getList,h=e.setFavorites,g=e.user,b=g.profile,w=g.authenticated,O=Object(l.useState)(void 0!==a?a.status:""),k=O[0],j=O[1],S=Object(l.useState)(void 0!==a&&void 0!==a.favorite?a.favorite:[]),_=S[0],A=S[1],E=e.mini_dialogActions,T=E.setMiniDialog,R=E.showMiniDialog,B=e.snackbarActions.showSnackBar,H=Object(l.useState)(!1),P=H[0],X=H[1];return Object(l.useEffect)(function(){if(w)X(a.basket.includes(b._id));else{if(void 0==localStorage.favorites)localStorage.favorites=s()([]);else for(var e=JSON.parse(localStorage.favorites),t=0;t<e.length;t++)e[t]._id==a._id&&A(!0);if(void 0==localStorage.basket)localStorage.basket=s()([]);else for(var n=JSON.parse(localStorage.basket),r=0;r<n.length;r++)n[r]._id==a._id&&X(!0)}},[]),L(f.a,{className:t.card},L(d.a,null,L(p.a,{className:t.column},L("div",{className:t.chipList},a.latest?L("div",{className:t.chip,style:{color:"white",background:"green"}},"\u041d\u043e\u0432\u0438\u043d\u043a\u0430"):null,a.hit?L("div",{className:t.chip,style:{color:"black",background:"yellow"}},"\u0425\u0438\u0442"):null),L(N.a,{href:"/item/[id]",as:"/item/".concat(void 0!==a?a._id:"new")},L(F.LazyLoadImage,{effect:"blur",className:t.media,src:a.image,alt:a.info})),L(N.a,{href:"/item/[id]",as:"/item/".concat(void 0!==a?a._id:"new")},L("div",{className:t.name},a.name)),L(N.a,{href:"/item/[id]",as:"/item/".concat(void 0!==a?a._id:"new")},L("div",{className:t.row},0===a.stock||void 0===a.stock?L("div",{className:t.price},"".concat(a.price," \u0441\u043e\u043c")):L(u.a.Fragment,null,L("div",{className:t.crossedPrice},"".concat(a.price)),L("div",{className:t.stockPrice},"".concat(a.stock," \u0441\u043e\u043c"))))),["admin","\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f","\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"].includes(b.role)?L(u.a.Fragment,null,L(J.a,{onClick:Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b?",L(I,{action:function(){var e=Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.h)([a._id]);case 2:j("active"===k?"deactive":"active");case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})),R(!0);case 3:case"end":return e.stop()}},e)})),size:"small",color:"primary"},"active"===k?"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c":"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"),"admin"===b.role?L(J.a,{onClick:Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b?",L(I,{action:function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.c)([a._id],c);case 2:t=e.sent.items,r(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})),R(!0);case 3:case"end":return e.stop()}},e)})),size:"small",color:"primary"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"):null):"client"!==b.role&&w?null:L(x.a,{style:{color:P?"#ffb300":"#e1e1e1"},className:t.button,onClick:function(){if("client"===b.role)Object(C.a)({item:a._id,count:1});else if(!w){for(var e=JSON.parse(localStorage.basket),t=-1,n=0;n<e.length;n++)e[n].item._id==a._id&&(t=n);-1===t&&e.push({item:a,count:1}),localStorage.basket=s()(e)}B("\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),X(!0)}}),"client"!==b.role&&w?null:L(y.a,{className:t.buttonToggle,onClick:Object(o.a)(i.a.mark(function e(){var t,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("client"!==b.role){e.next=7;break}return e.next=3,Object(z.d)([a._id]);case 3:-1===(t=_.indexOf(b._id))&&(_.push(b._id),A(Object(n.a)(_)),void 0!==m&&m()),e.next=8;break;case 7:if(!w){for(r=JSON.parse(localStorage.favorites),t=-1,c=0;c<r.length;c++)r[c]._id==a._id&&(t=c);-1===t&&(r.push(a),A(!0),localStorage.favorites=s()(r),h&&h(r))}case 8:-1!==t&&(T("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b?",L(I,{action:function(){var e=Object(o.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"client"===b.role?(_.splice(t,1),A(Object(n.a)(_)),void 0!==m&&m()):w||((a=JSON.parse(localStorage.favorites)).splice(t,1),A(!1),localStorage.favorites=s()(a),h&&h(a));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})),R(!0));case 9:case"end":return e.stop()}},e)})),style:{color:!w&&!0===_||"client"==b.role&&_.includes(b._id)?"#ffb300":"#e1e1e1"}}))))});t.a=Object(h.b)(function(e){return{user:e.user,app:e.app}},function(e){return{mini_dialogActions:Object(g.b)(b,e),snackbarActions:Object(g.b)(w,e)}})(A)},dfwq:function(e,t,a){"use strict";var n=a("p0XB"),r=a.n(n);var i=a("d04V"),o=a.n(i),c=a("yLu3"),s=a.n(c);function l(e){return function(e){if(r()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return l})},fGTc:function(e,t,a){"use strict";a.r(t);var n=a("9Jkg"),r=a.n(n),i=a("ln6h"),o=a.n(i),c=a("O40h"),s=a("m/Pd"),l=a.n(s),u=a("q1tI"),f=a.n(u),d=a("aSjJ"),p=a("/MKj"),m=a("R/WZ"),v=Object(m.a)({page:{paddingTop:20,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexWrap:"wrap"}}),h=a("XZkx"),g=a("XHc+"),b=f.a.createElement,w=f.a.memo(function(e){var t=v(),a=e.data,n=Object(u.useState)(a.favorites),i=n[0],s=n[1],f=e.app.search,p=e.user.authenticated;Object(u.useEffect)(function(){Object(c.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p||!localStorage.favorites){e.next=5;break}t=JSON.parse(localStorage.favorites),s(t.filter(function(e){return e.name.includes(f)})),e.next=10;break;case 5:return e.t0=s,e.next=8,Object(g.e)({search:f});case 8:e.t1=e.sent.favorites,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}},e)}))()},[f]),Object(u.useEffect)(function(){Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p||(localStorage.favorites||(localStorage.favorites=r()([])),s(JSON.parse(localStorage.favorites)));case 1:case"end":return e.stop()}},e)}))()},[]);var m=function(){var e=Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,Object(g.e)({search:f});case 3:e.t1=e.sent.favorites,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return b(d.a,{getList:m,pageName:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"},b(l.a,null,b("title",null,"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),b("div",{className:t.page},i?i.map(function(e){return b(h.a,{setList:s,setFavorites:s,getList:m,key:e._id,element:e})}):null))});w.getInitialProps=Object(c.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.e)({search:""});case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}},e)}));t.default=Object(p.b)(function(e){return{app:e.app,user:e.user}})(w)}},[["IvQJ",1,0]]]);